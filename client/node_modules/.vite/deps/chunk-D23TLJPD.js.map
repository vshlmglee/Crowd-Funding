{
  "version": 3,
  "sources": ["../../@thirdweb-dev/sdk/dist/erc-20-history-ea6dc9ce.browser.esm.js"],
  "sourcesContent": ["import { _ as _defineProperty } from './QueryParams-7d9473b5.browser.esm.js';\nimport { b6 as fetchCurrencyValue } from './contract-publisher-a7ca5177.browser.esm.js';\nimport { constants, BigNumber } from 'ethers';\n\n/**\n * Manages history for Token contracts\n * @public\n */\nclass TokenERC20History {\n  constructor(contractWrapper, events) {\n    _defineProperty(this, \"events\", void 0);\n    _defineProperty(this, \"contractWrapper\", void 0);\n    this.contractWrapper = contractWrapper;\n    this.events = events;\n  }\n\n  /**\n   * Get all holder balances\n   *\n   * @remarks Lets you get all token holders and their corresponding balances\n   * @returns - A JSON object of all token holders and their corresponding balances\n   * @example\n   * ```javascript\n   * const allHolderBalances = await contract.history.getAllHolderBalances();\n   * ```\n   */\n  async getAllHolderBalances() {\n    const a = await this.events.getEvents(\"Transfer\");\n    const txns = a.map(b => b.data);\n    const balances = {};\n    txns.forEach(item => {\n      const from = item?.from;\n      const to = item?.to;\n      const amount = item?.value;\n      if (!(from === constants.AddressZero)) {\n        if (!(from in balances)) {\n          balances[from] = BigNumber.from(0);\n        }\n        balances[from] = balances[from].sub(amount);\n      }\n      if (!(to === constants.AddressZero)) {\n        if (!(to in balances)) {\n          balances[to] = BigNumber.from(0);\n        }\n        balances[to] = balances[to].add(amount);\n      }\n    });\n    return Promise.all(Object.keys(balances).map(async addr => ({\n      holder: addr,\n      balance: await fetchCurrencyValue(this.contractWrapper.getProvider(), this.contractWrapper.readContract.address, balances[addr])\n    })));\n  }\n}\n\nexport { TokenERC20History as T };\n"],
  "mappings": ";;;;;;;;;;;;;;;;AAAA;AAEA;AAMA,IAAM,oBAAN,MAAwB;AAAA,EACtB,YAAY,iBAAiB,QAAQ;AACnC,oBAAgB,MAAM,UAAU,MAAM;AACtC,oBAAgB,MAAM,mBAAmB,MAAM;AAC/C,SAAK,kBAAkB;AACvB,SAAK,SAAS;AAAA,EAChB;AAAA,EAYA,MAAM,uBAAuB;AAC3B,UAAM,IAAI,MAAM,KAAK,OAAO,UAAU,UAAU;AAChD,UAAM,OAAO,EAAE,IAAI,OAAK,EAAE,IAAI;AAC9B,UAAM,WAAW,CAAC;AAClB,SAAK,QAAQ,UAAQ;AACnB,YAAM,OAAO,6BAAM;AACnB,YAAM,KAAK,6BAAM;AACjB,YAAM,SAAS,6BAAM;AACrB,UAAI,EAAE,SAAS,YAAU,cAAc;AACrC,YAAI,EAAE,QAAQ,WAAW;AACvB,mBAAS,QAAQ,UAAU,KAAK,CAAC;AAAA,QACnC;AACA,iBAAS,QAAQ,SAAS,MAAM,IAAI,MAAM;AAAA,MAC5C;AACA,UAAI,EAAE,OAAO,YAAU,cAAc;AACnC,YAAI,EAAE,MAAM,WAAW;AACrB,mBAAS,MAAM,UAAU,KAAK,CAAC;AAAA,QACjC;AACA,iBAAS,MAAM,SAAS,IAAI,IAAI,MAAM;AAAA,MACxC;AAAA,IACF,CAAC;AACD,WAAO,QAAQ,IAAI,OAAO,KAAK,QAAQ,EAAE,IAAI,OAAM,UAAS;AAAA,MAC1D,QAAQ;AAAA,MACR,SAAS,MAAM,mBAAmB,KAAK,gBAAgB,YAAY,GAAG,KAAK,gBAAgB,aAAa,SAAS,SAAS,KAAK;AAAA,IACjI,EAAE,CAAC;AAAA,EACL;AACF;",
  "names": []
}
