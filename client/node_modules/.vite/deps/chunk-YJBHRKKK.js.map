{
  "version": 3,
  "sources": ["../../@thirdweb-dev/sdk/dist/thirdweb-checkout-d2099c9a.browser.esm.js"],
  "sourcesContent": ["import { _ as _defineProperty } from './QueryParams-7d9473b5.browser.esm.js';\nimport { cr as ChainId } from './contract-publisher-a7ca5177.browser.esm.js';\nimport invariant from 'tiny-invariant';\n\nconst PAPER_API_BASE = `https://paper.xyz/api`;\nconst PAPER_API_VERSION = `2022-08-12`;\n\n/**\n * @internal\n */\nconst PAPER_API_URL = `${PAPER_API_BASE}/${PAPER_API_VERSION}/platform/thirdweb`;\nconst PAPER_CHAIN_ID_MAP = {\n  [ChainId.Mainnet]: \"Ethereum\",\n  [ChainId.Goerli]: \"Goerli\",\n  [ChainId.Polygon]: \"Polygon\",\n  [ChainId.Mumbai]: \"Mumbai\",\n  [ChainId.Avalanche]: \"Avalanche\"\n};\n\n/**\n * @internal\n */\nfunction parseChainIdToPaperChain(chainId) {\n  invariant(chainId in PAPER_CHAIN_ID_MAP, `chainId not supported by paper: ${chainId}`);\n  return PAPER_CHAIN_ID_MAP[chainId];\n}\n/**\n *\n * @param contractAddress\n * @param chainId\n * @internal\n * @returns the paper xyz contract id\n * @throws if the contract is not registered on paper xyz\n */\nasync function fetchRegisteredCheckoutId(contractAddress, chainId) {\n  const paperChain = parseChainIdToPaperChain(chainId);\n  const res = await fetch(`${PAPER_API_URL}/register-contract?contractAddress=${contractAddress}&chain=${paperChain}`);\n  const json = await res.json();\n  invariant(json.result.id, \"Contract is not registered with paper\");\n  return json.result.id;\n}\n\n/**\n * The parameters for creating a paper.xyz checkout link.\n * @public\n */\n\nconst DEFAULT_PARAMS = {\n  expiresInMinutes: 15,\n  feeBearer: \"BUYER\",\n  sendEmailOnSuccess: true,\n  redirectAfterPayment: false\n};\n\n/**\n * @internal\n */\nasync function createCheckoutLinkIntent(contractId, params) {\n  const res = await fetch(`${PAPER_API_URL}/checkout-link-intent`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      contractId,\n      ...DEFAULT_PARAMS,\n      ...params,\n      metadata: {\n        ...params.metadata,\n        via_platform: \"thirdweb\"\n      },\n      // overrides that are hard coded\n      hideNativeMint: true,\n      hidePaperWallet: !!params.walletAddress,\n      hideExternalWallet: true,\n      hidePayWithCrypto: true,\n      usePaperKey: false\n    })\n  });\n  const json = await res.json();\n  invariant(json.checkoutLinkIntentUrl, \"Failed to create checkout link intent\");\n  return json.checkoutLinkIntentUrl;\n}\n\n/**\n * @internal\n */\nclass PaperCheckout {\n  constructor(contractWrapper) {\n    _defineProperty(this, \"contractWrapper\", void 0);\n    this.contractWrapper = contractWrapper;\n  }\n  async getCheckoutId() {\n    return fetchRegisteredCheckoutId(this.contractWrapper.readContract.address, await this.contractWrapper.getChainID());\n  }\n  async isEnabled() {\n    try {\n      return !!(await this.getCheckoutId());\n    } catch (err) {\n      return false;\n    }\n  }\n  async createLinkIntent(params) {\n    return await createCheckoutLinkIntent(await this.getCheckoutId(), params);\n  }\n}\n\nexport { PAPER_API_URL as P, PaperCheckout as a, createCheckoutLinkIntent as c, fetchRegisteredCheckoutId as f, parseChainIdToPaperChain as p };\n"],
  "mappings": ";;;;;;;;;;AAAA;AAIA,IAAM,iBAAiB;AACvB,IAAM,oBAAoB;AAK1B,IAAM,gBAAgB,GAAG,kBAAkB;AAC3C,IAAM,qBAAqB;AAAA,EACzB,CAAC,QAAQ,UAAU;AAAA,EACnB,CAAC,QAAQ,SAAS;AAAA,EAClB,CAAC,QAAQ,UAAU;AAAA,EACnB,CAAC,QAAQ,SAAS;AAAA,EAClB,CAAC,QAAQ,YAAY;AACvB;AAKA,SAAS,yBAAyB,SAAS;AACzC,YAAU,WAAW,oBAAoB,mCAAmC,SAAS;AACrF,SAAO,mBAAmB;AAC5B;AASA,eAAe,0BAA0B,iBAAiB,SAAS;AACjE,QAAM,aAAa,yBAAyB,OAAO;AACnD,QAAM,MAAM,MAAM,MAAM,GAAG,mDAAmD,yBAAyB,YAAY;AACnH,QAAM,OAAO,MAAM,IAAI,KAAK;AAC5B,YAAU,KAAK,OAAO,IAAI,uCAAuC;AACjE,SAAO,KAAK,OAAO;AACrB;AAOA,IAAM,iBAAiB;AAAA,EACrB,kBAAkB;AAAA,EAClB,WAAW;AAAA,EACX,oBAAoB;AAAA,EACpB,sBAAsB;AACxB;AAKA,eAAe,yBAAyB,YAAY,QAAQ;AAC1D,QAAM,MAAM,MAAM,MAAM,GAAG,sCAAsC;AAAA,IAC/D,QAAQ;AAAA,IACR,SAAS;AAAA,MACP,gBAAgB;AAAA,IAClB;AAAA,IACA,MAAM,KAAK,UAAU;AAAA,MACnB;AAAA,MACA,GAAG;AAAA,MACH,GAAG;AAAA,MACH,UAAU;AAAA,QACR,GAAG,OAAO;AAAA,QACV,cAAc;AAAA,MAChB;AAAA,MAEA,gBAAgB;AAAA,MAChB,iBAAiB,CAAC,CAAC,OAAO;AAAA,MAC1B,oBAAoB;AAAA,MACpB,mBAAmB;AAAA,MACnB,aAAa;AAAA,IACf,CAAC;AAAA,EACH,CAAC;AACD,QAAM,OAAO,MAAM,IAAI,KAAK;AAC5B,YAAU,KAAK,uBAAuB,uCAAuC;AAC7E,SAAO,KAAK;AACd;AAKA,IAAM,gBAAN,MAAoB;AAAA,EAClB,YAAY,iBAAiB;AAC3B,oBAAgB,MAAM,mBAAmB,MAAM;AAC/C,SAAK,kBAAkB;AAAA,EACzB;AAAA,EACA,MAAM,gBAAgB;AACpB,WAAO,0BAA0B,KAAK,gBAAgB,aAAa,SAAS,MAAM,KAAK,gBAAgB,WAAW,CAAC;AAAA,EACrH;AAAA,EACA,MAAM,YAAY;AAChB,QAAI;AACF,aAAO,CAAC,CAAE,MAAM,KAAK,cAAc;AAAA,IACrC,SAAS,KAAP;AACA,aAAO;AAAA,IACT;AAAA,EACF;AAAA,EACA,MAAM,iBAAiB,QAAQ;AAC7B,WAAO,MAAM,yBAAyB,MAAM,KAAK,cAAc,GAAG,MAAM;AAAA,EAC1E;AACF;",
  "names": []
}
