{
  "version": 3,
  "sources": ["../../@thirdweb-dev/sdk/dist/thirdweb-dev-sdk.browser.esm.js", "../../@thirdweb-dev/sdk/dist/abi-197c81ef.browser.esm.js", "../../@thirdweb-dev/sdk/dist/sdk-1fbd7918.browser.esm.js", "../../@thirdweb-dev/generated-abis/dist/thirdweb-dev-generated-abis.esm.js", "../../@thirdweb-dev/sdk/dist/watchTransactions-8b228c8c.browser.esm.js"],
  "sourcesContent": ["export { g as getRpcUrl } from './QueryParams-7d9473b5.browser.esm.js';\nexport { bz as ALL_ROLES, d as AbiObjectSchema, e as AbiSchema, A as AbiTypeSchema, aa as AddressOrEnsSchema, a9 as AddressSchema, bs as AdminRoleMissingError, be as AssetNotFoundError, bn as AuctionAlreadyStartedError, bt as AuctionHasNotEndedError, B as BYOCContractMetadataSchema, L as BaseSignaturePayloadInput, a6 as BigNumberSchema, a8 as BigNumberTransformSchema, a7 as BigNumberishSchema, c0 as COMMON_FACTORY, cU as CONTRACTS_MAP, cn as CONTRACT_ADDRESSES, b_ as CREATE2_FACTORY_BYTECODE, ae as CallOverrideSchema, cr as ChainId, f as ChainIdToAddressSchema, t as ClaimConditionInputArray, s as ClaimConditionInputSchema, r as ClaimConditionMetadataSchema, v as ClaimConditionOutputSchema, b1 as ClaimEligibility, x as CommonContractOutputSchema, w as CommonContractSchema, G as CommonPlatformFeeSchema, z as CommonPrimarySaleSchema, y as CommonRoyaltySchema, I as CommonSymbolSchema, H as CommonTrustedForwarderSchema, p as CompilerMetadataFetchedSchema, a$ as ContractAppURI, af as ContractEncoder, aQ as ContractEvents, o as ContractInfoSchema, aR as ContractInterceptor, ag as ContractMetadata, aU as ContractOwner, aS as ContractPlatformFee, aj as ContractPrimarySale, aT as ContractPublishedMetadata, ah as ContractRoles, ai as ContractRoyalty, J as CurrencySchema, K as CurrencyValueSchema, b as CustomContractDeploy, C as CustomContractInput, a as CustomContractOutput, c as CustomContractSchema, g as CustomFactoryInput, c3 as DEPLOYER_ABI, c2 as DEPLOYER_BYTECODE, ak as DelayedReveal, aW as DeployTransaction, D as DeployTypeInput, h as DeploymentNetworkInput, al as DropClaimConditions, am as DropErc1155ClaimConditions, bh as DuplicateFileNameError, bm as DuplicateLeafsError, cF as EditionDropInitializer, cG as EditionInitializer, ad as EndDateSchema, aF as Erc1155, aK as Erc1155BatchMintable, aG as Erc1155Burnable, aH as Erc1155Enumerable, aI as Erc1155LazyMintable, aJ as Erc1155Mintable, aL as Erc1155SignatureMintable, an as Erc20, at as Erc20BatchMintable, ao as Erc20Burnable, as as Erc20ClaimableWithConditions, ap as Erc20Droppable, aq as Erc20Mintable, ar as Erc20SignatureMintable, au as Erc721, aB as Erc721BatchMintable, aE as Erc721Burnable, aA as Erc721Claimable, az as Erc721ClaimableWithConditions, aC as Erc721Enumerable, av as Erc721LazyMintable, aw as Erc721Mintable, ax as Erc721Supply, ay as Erc721TieredDrop, aD as Erc721WithQuantitySignatureMintable, cy as EventType, bu as ExtensionNotImplementedError, E as ExtraPublishMetadataSchemaInput, i as ExtraPublishMetadataSchemaOutput, F as FactoryDeploymentSchema, bl as FetchError, bg as FileNameMissingError, j as FullPublishMetadataSchemaInput, k as FullPublishMetadataSchemaOutput, bo as FunctionDeprecatedError, c1 as GAS_LIMIT_FOR_DEPLOYER, aP as GasCostEstimator, $ as GenericRequest, ct as InterfaceId_IERC1155, cs as InterfaceId_IERC721, bc as InvalidAddressError, cx as LINK_TOKEN_ADDRESS, bp as ListingNotFoundError, cH as MarketplaceInitializer, aM as MarketplaceV3DirectListings, aN as MarketplaceV3EnglishAuctions, cI as MarketplaceV3Initializer, aO as MarketplaceV3Offers, a0 as MerkleSchema, Z as MintRequest1155, X as MintRequest20, Y as MintRequest721, _ as MintRequest721withQuantity, bj as MissingOwnerRoleError, bd as MissingRoleError, cJ as MultiwrapInitializer, cv as NATIVE_TOKENS, cu as NATIVE_TOKEN_ADDRESS, cK as NFTCollectionInitializer, cL as NFTDropInitializer, bi as NotEnoughTokensError, bb as NotFoundError, cm as OZ_DEFENDER_FORWARDER_ADDRESS, cT as PREBUILT_CONTRACTS_APPURI_MAP, cS as PREBUILT_CONTRACTS_MAP, cM as PackInitializer, u as PartialClaimConditionInputSchema, P as PreDeployMetadata, q as PreDeployMetadataFetchedSchema, l as ProfileSchemaInput, m as ProfileSchemaOutput, n as PublishedContractSchema, bk as QuantityAboveLimitError, ab as RawDateSchema, br as RestrictedTransferError, b$ as SIGNATURE, cE as SUPPORTED_FEATURES, R as Signature1155PayloadInput, T as Signature1155PayloadInputWithTokenId, U as Signature1155PayloadOutput, M as Signature20PayloadInput, N as Signature20PayloadOutput, O as Signature721PayloadInput, Q as Signature721PayloadOutput, V as Signature721WithQuantityInput, W as Signature721WithQuantityOutput, cN as SignatureDropInitializer, a1 as SnapshotEntryInput, a3 as SnapshotEntryWithProofSchema, a5 as SnapshotInfoSchema, a2 as SnapshotInputSchema, a4 as SnapshotSchema, cO as SplitInitializer, ac as StartDateSchema, S as StaticJsonRpcBatchProvider, b0 as Status, cP as TokenDropInitializer, cQ as TokenInitializer, aV as Transaction, bv as TransactionError, bf as UploadError, cR as VoteInitializer, bq as WrongListingTypeError, b8 as approveErc20Allowance, bT as assertEnabled, aY as biconomySendFunction, b3 as cleanCurrencyAddress, c9 as computeDeploymentAddress, cd as computeDeploymentInfo, ca as computeEOAForwarderAddress, cb as computeForwarderAddress, b9 as convertToReadableQuantity, by as createSnapshot, aX as defaultGaslessSendFunction, aZ as defenderSendFunction, bU as detectContractFeature, bQ as detectFeatures, ce as encodeConstructorParamsForImplementation, bG as extractCommentFromMetadata, bE as extractConstructorParams, bH as extractConstructorParamsFromAbi, bJ as extractEventsFromAbi, bF as extractFunctions, bI as extractFunctionsFromAbi, bM as extractIPFSHashFromBytecode, bK as extractMinimalProxyImplementationAddress, bC as fetchAbiFromAddress, ch as fetchAndCacheDeployMetadata, cg as fetchAndCachePublishedContractURI, bB as fetchContractMetadataFromAddress, b5 as fetchCurrencyMetadata, b6 as fetchCurrencyValue, bP as fetchExtendedReleaseMetadata, bO as fetchPreDeployMetadata, bN as fetchRawPredeployMetadata, ba as fetchSnapshotEntryForAddress, bZ as fetchSourceFilesFromMetadata, cA as getChainIdFromNetwork, cz as getChainProvider, co as getContractAddressByChainId, cW as getContractName, cp as getContractPublisherAddress, cV as getContractTypeForRemoteName, c6 as getCreate2FactoryAddress, cf as getCreate2FactoryDeploymentInfo, c8 as getInitBytecodeWithSalt, cc as getKeylessTxn, cq as getMultichainRegistryAddress, cw as getNativeTokenByChainId, cC as getProviderFromRpcUrl, bA as getRoleHash, c7 as getSaltHash, cD as getSignerAndProvider, cl as getSupportedChains, bV as hasFunction, bD as hasMatchingAbi, bx as includesErrorMessage, cB as isChainConfig, c4 as isContractDeployed, bY as isDowngradeVersion, c5 as isEIP155Enforced, bS as isExtensionEnabled, bR as isFeatureEnabled, bX as isIncrementalVersion, b2 as isNativeToken, cX as isProvider, cY as isSigner, b4 as normalizePriceValue, bw as parseRevertReason, a_ as prepareGaslessRequest, cj as resolveAddress, bL as resolveContractUriFromAddress, ci as resolveEns, b7 as setErc20Allowance, ck as setSupportedChains, bW as toSemver } from './contract-publisher-a7ca5177.browser.esm.js';\nexport { c as EditionMetadataInputOrUriSchema, b as EditionMetadataInputSchema, E as EditionMetadataOutputSchema, a as EditionMetadataWithOwnerOutputSchema, O as OptionalPropertiesInput, P as ProposalState, T as TokenMintInputSchema, i as computeNativeTokenAddress, o as deployContractDeterministicRaw, j as directDeployDeterministic, k as directDeployDeterministicWithUri, h as getAllDetectedExtensions, f as getAllDetectedFeatures, g as getCachedAbiForContract, m as matchesPrebuiltAbi, n as normalizeAmount, p as predictAddressDeterministic, l as predictAddressDeterministicWithUri, e as toDisplayValue, t as toEther, d as toUnits } from './abi-197c81ef.browser.esm.js';\nexport { D as DropErc1155History } from './drop-erc1155-history-72d2f40d.browser.esm.js';\nexport { T as TokenERC20History } from './erc-20-history-ea6dc9ce.browser.esm.js';\nexport { S as StandardErc20 } from './erc-20-standard-7f7c4cb5.browser.esm.js';\nexport { S as StandardErc721 } from './erc-721-standard-3037ce83.browser.esm.js';\nexport { S as StandardErc1155 } from './erc-1155-standard-75ea6964.browser.esm.js';\nexport { L as ListingType, a as MarketplaceAuction, M as MarketplaceDirect } from './marketplace-auction-6ad37313.browser.esm.js';\nexport { A as APPROVED_IMPLEMENTATIONS, C as ContractDeployer, L as LOCAL_NODE_PKEY, S as SUPPORTED_CHAIN_IDS, T as ThirdwebSDK, U as UserWallet, c as checkVerificationStatus, d as computeCloneFactoryAddress, n as convertParamValues, q as createTransactionBatches, k as deployContractDeterministic, j as deployCreate2Factory, m as deployWithThrowawayDeployer, o as estimateGasForDeploy, e as extractFunctionParamsFromAbi, a as getAllDetectedExtensionNames, g as getAllDetectedFeatureNames, u as getApprovedImplementation, w as getDefaultTrustedForwarders, r as getDeployArguments, l as getDeploymentInfo, h as getEncodedConstructorParamsForThirdwebContract, f as getThirdwebContractAddress, s as getTrustedForwarders, i as isVerifiedOnEtherscan, p as predictThirdwebContractAddress, t as toWei, b as verify, v as verifyThirdwebPrebuiltImplementation } from './sdk-1fbd7918.browser.esm.js';\nexport { V as VoteType } from './Vote-3b66775c.browser.esm.js';\nexport { h as hasERC20Allowance } from './hasERC20Allowance-1e946d0b.browser.esm.js';\nexport { P as PAPER_API_URL, a as PaperCheckout, c as createCheckoutLinkIntent, f as fetchRegisteredCheckoutId, p as parseChainIdToPaperChain } from './thirdweb-checkout-d2099c9a.browser.esm.js';\nexport { c as getBlock, d as getBlockNumber, e as getBlockWithTransactions, b as getChainId, g as getContract, a as getContractFromAbi, w as watchBlock, f as watchBlockNumber, h as watchBlockWithTransactions, i as watchTransactions } from './watchTransactions-8b228c8c.browser.esm.js';\nimport 'bn.js';\nimport 'ethers';\nimport 'zod';\nimport '@thirdweb-dev/storage';\nimport 'tiny-invariant';\nimport '@thirdweb-dev/contracts-js/dist/abis/IERC20Metadata.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IERC20.json';\nimport 'uuid';\nimport 'merkletreejs';\nimport 'fast-deep-equal';\nimport '@thirdweb-dev/contracts-js/dist/abis/IERC165.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IERC721Metadata.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IERC1155Metadata.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IDelayedRevealDeprecated.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IThirdwebContract.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IERC721.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IERC1155.json';\nimport '@thirdweb-dev/chains';\nimport 'ethers/lib/utils';\nimport 'bs58';\nimport '@thirdweb-dev/contracts-js/dist/abis/TWMultichainRegistryLogic.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/ERC2771Context.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IAppURI.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IContractMetadata.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IDirectListings.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IEnglishAuctions.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IOffers.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IPackVRFDirect.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IPermissions.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IPermissionsEnumerable.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IPlatformFee.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IPrimarySale.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IRoyalty.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/Ownable.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IAccountFactory.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IAccount.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/ContractPublisher.json';\nimport 'eventemitter3';\nimport '@thirdweb-dev/contracts-js/dist/abis/Forwarder.json';\nimport 'cross-fetch';\nimport '@thirdweb-dev/contracts-js/dist/abis/IBurnableERC20.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IDrop.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IDropERC20_V2.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IDropSinglePhase.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IDropSinglePhase_V1.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IERC20Permit.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IMintableERC20.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IMulticall.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/ISignatureMintERC20.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IBurnableERC721.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IClaimableERC721.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IDelayedReveal.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IDropERC721_V3.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IERC721Enumerable.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IERC721Supply.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/ILazyMint.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IMintableERC721.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/ISignatureMintERC721.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/ISignatureMintERC721_V1.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/LazyMintWithTier.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IBurnableERC1155.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IClaimableERC1155.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IDrop1155.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IDropERC1155_V2.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IDropSinglePhase1155.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IDropSinglePhase1155_V1.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IERC1155Enumerable.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/IMintableERC1155.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/ISignatureMintERC1155.json';\nimport 'ethers/lib/utils.js';\nimport '@thirdweb-dev/generated-abis';\nimport '@thirdweb-dev/contracts-js/dist/abis/TWMultichainRegistryRouter.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/TWFactory.json';\nimport '@thirdweb-dev/contracts-js/dist/abis/TWRegistry.json';\n\n// handle browser vs node global\nglobalThis.global = globalThis;\n", "import { a8 as BigNumberTransformSchema, aa as AddressOrEnsSchema, a6 as BigNumberSchema, a7 as BigNumberishSchema, bD as hasMatchingAbi, e as AbiSchema, bQ as detectFeatures, c6 as getCreate2FactoryAddress, cd as computeDeploymentInfo, bH as extractConstructorParamsFromAbi, c9 as computeDeploymentAddress, c4 as isContractDeployed, c8 as getInitBytecodeWithSalt, ch as fetchAndCacheDeployMetadata } from './contract-publisher-a7ca5177.browser.esm.js';\nimport { z } from 'zod';\nimport { A as AmountSchema, C as CommonNFTOutput, b as CommonNFTInput, N as NFTInputOrUriSchema } from './QueryParams-7d9473b5.browser.esm.js';\nimport { x as extractFeatures, j as deployCreate2Factory, n as convertParamValues } from './sdk-1fbd7918.browser.esm.js';\nimport { utils, ethers, BigNumber } from 'ethers';\nimport invariant from 'tiny-invariant';\nimport { GENERATED_ABI } from '@thirdweb-dev/generated-abis';\n\nconst PropertiesInput = z.object({}).catchall(z.union([BigNumberTransformSchema, z.unknown()]));\n\n/**\n * @internal\n */\nconst OptionalPropertiesInput = z.union([z.array(PropertiesInput), PropertiesInput]).optional();\n\n/**\n * @internal\n */\nconst TokenMintInputSchema = z.object({\n  toAddress: AddressOrEnsSchema,\n  amount: AmountSchema\n});\n\n/**\n * @public\n */\n\n/**\n * @internal\n */\nconst EditionMetadataOutputSchema = z.object({\n  supply: BigNumberSchema,\n  metadata: CommonNFTOutput\n});\n\n/**\n * @internal\n */\nconst EditionMetadataWithOwnerOutputSchema = EditionMetadataOutputSchema.extend({\n  owner: z.string(),\n  quantityOwned: BigNumberSchema\n});\n\n/**\n * @internal\n */\nconst EditionMetadataInputSchema = z.object({\n  supply: BigNumberishSchema,\n  metadata: CommonNFTInput\n});\n\n/**\n * @internal\n */\nconst EditionMetadataInputOrUriSchema = z.object({\n  supply: BigNumberishSchema,\n  metadata: NFTInputOrUriSchema\n});\n\n/**\n * @public\n */\n\nlet ProposalState = /*#__PURE__*/function (ProposalState) {\n  ProposalState[ProposalState[\"Pending\"] = 0] = \"Pending\";\n  ProposalState[ProposalState[\"Active\"] = 1] = \"Active\";\n  ProposalState[ProposalState[\"Canceled\"] = 2] = \"Canceled\";\n  ProposalState[ProposalState[\"Defeated\"] = 3] = \"Defeated\";\n  ProposalState[ProposalState[\"Succeeded\"] = 4] = \"Succeeded\";\n  ProposalState[ProposalState[\"Queued\"] = 5] = \"Queued\";\n  ProposalState[ProposalState[\"Expired\"] = 6] = \"Expired\";\n  ProposalState[ProposalState[\"Executed\"] = 7] = \"Executed\";\n  return ProposalState;\n}({});\n\n/**\n * @internal\n * @param contractWrapper\n * @param abi\n * @returns\n */\nfunction matchesPrebuiltAbi(contractWrapper, abi) {\n  return hasMatchingAbi(AbiSchema.parse(contractWrapper.abi || []), [abi]);\n}\n\n/**\n * Return all the detected features in the abi\n * @param abi - parsed array of abi entries\n * @returns array of all detected extensions with full information on each feature\n * @internal\n * @deprecated use getAllDetectedExtensions instead\n */\nfunction getAllDetectedFeatures(abi) {\n  const features = [];\n  extractFeatures(detectFeatures(abi), features);\n  return features;\n}\n\n/**\n * Return all the detected extensions in the abi\n * @param abi - parsed array of abi entries\n * @returns array of all detected extensions with full information on each feature\n * @public\n */\nfunction getAllDetectedExtensions(abi) {\n  return getAllDetectedFeatures(abi).map(f => ({\n    ...f,\n    extensions: f.features\n  }));\n}\n\nasync function normalizeAmount(contractWrapper, amount) {\n  const decimals = await contractWrapper.readContract.decimals();\n  return utils.parseUnits(AmountSchema.parse(amount), decimals);\n}\n\nfunction toEther(amount) {\n  return utils.formatEther(amount);\n}\n\nfunction toUnits(amount, decimals) {\n  return utils.parseUnits(AmountSchema.parse(amount), decimals);\n}\n\nfunction toDisplayValue(amount, decimals) {\n  return utils.formatUnits(amount, decimals);\n}\n\n/**\n *\n * @internal\n * @param provider\n * @param storage\n * @param create2Factory\n */\nasync function computeNativeTokenAddress(provider, storage, create2Factory) {\n  if (!create2Factory) {\n    create2Factory = await getCreate2FactoryAddress(provider);\n  }\n  return (await computeDeploymentInfo(\"infra\", provider, storage, create2Factory, {\n    contractName: \"WETH9\"\n  })).transaction.predictedAddress;\n}\n\n/**\n * Direct deploy a contract at a deterministic address, using Create2 method\n * Address depends on the Create2 factory address and salt (if provided).\n *\n * @public\n *\n * @param bytecode\n * @param abi\n * @param signer\n * @param constructorArgs\n * @param saltForCreate2\n */\nasync function directDeployDeterministic(bytecode, abi, signer, constructorArgs, saltForCreate2) {\n  let gasLimit = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 7000000;\n  invariant(signer.provider, \"Provider is required\");\n  const bytecodePrefixed = bytecode.startsWith(\"0x\") ? bytecode : `0x${bytecode}`;\n\n  // 1. Deploy CREATE2 factory (if not already exists)\n  const create2Factory = await deployCreate2Factory(signer);\n\n  // 2. Encode constructor params\n  const constructorParamTypes = extractConstructorParamsFromAbi(abi).map(p => {\n    return p.type;\n  });\n  const paramValues = convertParamValues(constructorParamTypes, constructorArgs);\n  const encodedArgs = ethers.utils.defaultAbiCoder.encode(constructorParamTypes, paramValues);\n\n  // 3. Construct deployment transaction\n  const address = computeDeploymentAddress(bytecodePrefixed, encodedArgs, create2Factory, saltForCreate2);\n  const contractDeployed = await isContractDeployed(address, signer.provider);\n  let initBytecodeWithSalt = \"\";\n  if (!contractDeployed) {\n    console.debug(`deploying contract via create2 factory at: ${address}`);\n    initBytecodeWithSalt = getInitBytecodeWithSalt(bytecodePrefixed, encodedArgs, saltForCreate2);\n    let tx = {\n      to: create2Factory,\n      data: initBytecodeWithSalt\n    };\n    try {\n      await signer.estimateGas(tx);\n    } catch (e) {\n      console.debug(\"error estimating gas while deploying prebuilt: \", e);\n      tx.gasLimit = BigNumber.from(gasLimit);\n    }\n\n    // 4. Deploy\n    await (await signer.sendTransaction(tx)).wait();\n  } else {\n    throw new Error(`Contract already deployed at ${address}`);\n  }\n}\n\n/**\n * Direct deploy a contract at a deterministic address, using Create2 method\n * Address depends on the Create2 factory address and salt (if provided).\n *\n * @public\n *\n * @param publishMetadataUri\n * @param signer\n * @param storage\n * @param constructorArgs\n * @param saltForCreate2\n */\nasync function directDeployDeterministicWithUri(publishMetadataUri, signer, storage, constructorArgs, saltForCreate2) {\n  let gasLimit = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 7000000;\n  const {\n    compilerMetadata\n  } = await fetchAndCacheDeployMetadata(publishMetadataUri, storage);\n  await directDeployDeterministic(compilerMetadata.bytecode, compilerMetadata.abi, signer, constructorArgs, saltForCreate2, gasLimit);\n}\nasync function predictAddressDeterministic(bytecode, abi, provider, constructorArgs, saltForCreate2) {\n  const bytecodePrefixed = bytecode.startsWith(\"0x\") ? bytecode : `0x${bytecode}`;\n\n  // 1. Deploy CREATE2 factory (if not already exists)\n  const create2Factory = await getCreate2FactoryAddress(provider);\n\n  // 2. Encode constructor params\n  const constructorParamTypes = extractConstructorParamsFromAbi(abi).map(p => {\n    return p.type;\n  });\n  const paramValues = convertParamValues(constructorParamTypes, constructorArgs);\n  const encodedArgs = ethers.utils.defaultAbiCoder.encode(constructorParamTypes, paramValues);\n\n  // 3. Construct deployment transaction\n  const address = computeDeploymentAddress(bytecodePrefixed, encodedArgs, create2Factory, saltForCreate2);\n  return address;\n}\nasync function predictAddressDeterministicWithUri(publishMetadataUri, provider, storage, constructorArgs, saltForCreate2) {\n  const {\n    compilerMetadata\n  } = await fetchAndCacheDeployMetadata(publishMetadataUri, storage);\n  return await predictAddressDeterministic(compilerMetadata.bytecode, compilerMetadata.abi, provider, constructorArgs, saltForCreate2);\n}\n\n/**\n * Deploy a contract at a deterministic address, using Create2 method\n * Address depends on the Create2 factory address.\n *\n * @public\n *\n * @param signer\n * @param bytecode\n * @param encodedArgs\n * @param create2FactoryAddress\n */\nasync function deployContractDeterministicRaw(signer, bytecode, encodedArgs, create2FactoryAddress, options, predictedAddress) {\n  let gasLimit = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : 7000000;\n  // Check if the implementation contract is already deployed\n  invariant(signer.provider, \"Provider required\");\n  const contractDeployed = predictedAddress ? await isContractDeployed(predictedAddress, signer.provider) : false;\n  if (!contractDeployed) {\n    console.debug(`deploying contract via create2 factory at: ${predictedAddress}`);\n    const initBytecodeWithSalt = getInitBytecodeWithSalt(bytecode, encodedArgs);\n    let tx = {\n      to: create2FactoryAddress,\n      data: initBytecodeWithSalt\n    };\n    try {\n      await signer.estimateGas(tx);\n    } catch (e) {\n      console.debug(\"error estimating gas while deploying prebuilt: \", e);\n      tx.gasLimit = BigNumber.from(gasLimit);\n    }\n    await (await signer.sendTransaction(tx)).wait();\n  }\n}\n\nfunction getCachedAbiForContract(address) {\n  if (address in GENERATED_ABI) {\n    return GENERATED_ABI[address];\n  }\n  return undefined;\n}\n\nexport { EditionMetadataOutputSchema as E, OptionalPropertiesInput as O, ProposalState as P, TokenMintInputSchema as T, EditionMetadataWithOwnerOutputSchema as a, EditionMetadataInputSchema as b, EditionMetadataInputOrUriSchema as c, toUnits as d, toDisplayValue as e, getAllDetectedFeatures as f, getCachedAbiForContract as g, getAllDetectedExtensions as h, computeNativeTokenAddress as i, directDeployDeterministic as j, directDeployDeterministicWithUri as k, predictAddressDeterministicWithUri as l, matchesPrebuiltAbi as m, normalizeAmount as n, deployContractDeterministicRaw as o, predictAddressDeterministic as p, toEther as t };\n", "import { _ as _defineProperty, D as DEFAULT_API_KEY, A as AmountSchema } from './QueryParams-7d9473b5.browser.esm.js';\nimport { d4 as RPCConnectionHandler, cj as resolveAddress, b4 as normalizePriceValue, b2 as isNativeToken, b6 as fetchCurrencyValue, d5 as signTypedDataInternal, cr as ChainId, cz as getChainProvider, d6 as ContractWrapper, cu as NATIVE_TOKEN_ADDRESS, bQ as detectFeatures, cZ as buildTransactionFunction, aV as Transaction, cq as getMultichainRegistryAddress, ch as fetchAndCacheDeployMetadata, bR as isFeatureEnabled, e as AbiSchema, d7 as getAllPluginsAbi, bB as fetchContractMetadataFromAddress, cg as fetchAndCachePublishedContractURI, d8 as caches, c6 as getCreate2FactoryAddress, cd as computeDeploymentInfo, ce as encodeConstructorParamsForImplementation, c4 as isContractDeployed, bZ as fetchSourceFilesFromMetadata, bH as extractConstructorParamsFromAbi, bL as resolveContractUriFromAddress, cp as getContractPublisherAddress, bP as fetchExtendedReleaseMetadata, c1 as GAS_LIMIT_FOR_DEPLOYER, c0 as COMMON_FACTORY, c5 as isEIP155Enforced, d9 as CUSTOM_GAS_FOR_CHAIN, cf as getCreate2FactoryDeploymentInfo, c3 as DEPLOYER_ABI, c2 as DEPLOYER_BYTECODE, cn as CONTRACT_ADDRESSES, da as AddressZero, cb as computeForwarderAddress, cM as PackInitializer, cI as MarketplaceV3Initializer, cH as MarketplaceInitializer, cO as SplitInitializer, cR as VoteInitializer, cQ as TokenInitializer, cP as TokenDropInitializer, cG as EditionInitializer, cF as EditionDropInitializer, cJ as MultiwrapInitializer, cN as SignatureDropInitializer, cK as NFTCollectionInitializer, cL as NFTDropInitializer, cS as PREBUILT_CONTRACTS_MAP, cW as getContractName, cB as isChainConfig, ck as setSupportedChains, db as ContractPublisher, cV as getContractTypeForRemoteName, cD as getSignerAndProvider, dc as SmartContract, dd as getCompositePluginABI, de as buildDeployTransactionFunction, co as getContractAddressByChainId, cT as PREBUILT_CONTRACTS_APPURI_MAP, cy as EventType, aW as DeployTransaction } from './contract-publisher-a7ca5177.browser.esm.js';\nimport { ThirdwebStorage } from '@thirdweb-dev/storage';\nimport TWRegistryABI from '@thirdweb-dev/contracts-js/dist/abis/TWMultichainRegistryLogic.json';\nimport TWRegistryRouterABI from '@thirdweb-dev/contracts-js/dist/abis/TWMultichainRegistryRouter.json';\nimport { ethers, utils, constants, Contract, BigNumber, Wallet } from 'ethers';\nimport ERC20Abi from '@thirdweb-dev/contracts-js/dist/abis/IERC20.json';\nimport EventEmitter, { EventEmitter as EventEmitter$1 } from 'eventemitter3';\nimport invariant from 'tiny-invariant';\nimport { defaultChains } from '@thirdweb-dev/chains';\nimport IThirdwebContractABI from '@thirdweb-dev/contracts-js/dist/abis/IThirdwebContract.json';\nimport { GENERATED_ABI } from '@thirdweb-dev/generated-abis';\nimport fetch from 'cross-fetch';\nimport ContractPublisherAbi from '@thirdweb-dev/contracts-js/dist/abis/ContractPublisher.json';\nimport TWFactoryAbi from '@thirdweb-dev/contracts-js/dist/abis/TWFactory.json';\nimport TWRegistryABI$1 from '@thirdweb-dev/contracts-js/dist/abis/TWRegistry.json';\n\n/**\n * publicly available wallet for local nodes\n */\nconst LOCAL_NODE_PKEY = \"0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80\";\n\n/**\n *\n * {@link UserWallet} events that you can subscribe to using `sdk.wallet.events`.\n *\n * @public\n */\n\n/**\n * Connect and Interact with a user wallet\n * @example\n * ```javascript\n * const balance = await sdk.wallet.balance();\n * ```\n * @public\n */\nclass UserWallet {\n  constructor(network, options) {\n    _defineProperty(this, \"connection\", void 0);\n    _defineProperty(this, \"options\", void 0);\n    _defineProperty(this, \"events\", new EventEmitter());\n    this.connection = new RPCConnectionHandler(network, options);\n    this.options = options;\n    this.events = new EventEmitter();\n  }\n\n  // TODO disconnect()\n  // TODO switchChain()\n  // TODO tokens()\n  // TODO NFTs()\n\n  // TODO this will become the source of truth of the signer and have every contract read from it\n  // TODO separate signer and provider logics\n  connect(network) {\n    this.connection.updateSignerOrProvider(network);\n    this.events.emit(\"signerChanged\", this.connection.getSigner());\n  }\n\n  /**\n   * Transfer native or ERC20 tokens from this wallet to another wallet\n   * @example\n   * ```javascript\n   *  // transfer 0.8 ETH\n   * await sdk.wallet.transfer(\"0x...\", 0.8);\n   *  // transfer 0.8 tokens of `tokenContractAddress`\n   * await sdk.wallet.transfer(\"0x...\", 0.8, tokenContractAddress);\n   * ```\n   * @param to - the account to send funds to\n   * @param amount - the amount in tokens\n   * @param currencyAddress - Optional - ERC20 contract address of the token to transfer\n   */\n  async transfer(to, amount) {\n    let currencyAddress = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : NATIVE_TOKEN_ADDRESS;\n    const resolvedTo = await resolveAddress(to);\n    const resolvedCurrency = await resolveAddress(currencyAddress);\n    const signer = this.requireWallet();\n    const amountInWei = await normalizePriceValue(this.connection.getProvider(), amount, currencyAddress);\n    if (isNativeToken(resolvedCurrency)) {\n      // native token transfer\n      const from = await signer.getAddress();\n      const tx = await signer.sendTransaction({\n        from,\n        to: resolvedTo,\n        value: amountInWei\n      });\n      return {\n        receipt: await tx.wait()\n      };\n    } else {\n      // ERC20 token transfer\n      return {\n        receipt: await this.createErc20(resolvedCurrency).sendTransaction(\"transfer\", [resolvedTo, amountInWei])\n      };\n    }\n  }\n\n  /**\n   * Fetch the native or ERC20 token balance of this wallet\n   * @example\n   * ```javascript\n   * // native currency balance\n   * const balance = await sdk.wallet.balance();\n   * // ERC20 token balance\n   * const erc20balance = await sdk.wallet.balance(tokenContractAddress);\n   *\n   * ```\n   */\n  async balance() {\n    let currencyAddress = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : NATIVE_TOKEN_ADDRESS;\n    this.requireWallet();\n    const resolvedCurrency = await resolveAddress(currencyAddress);\n    const provider = this.connection.getProvider();\n    let balance;\n    if (isNativeToken(resolvedCurrency)) {\n      balance = await provider.getBalance(await this.getAddress());\n    } else {\n      balance = await this.createErc20(resolvedCurrency).readContract.balanceOf(await this.getAddress());\n    }\n    return await fetchCurrencyValue(provider, resolvedCurrency, balance);\n  }\n\n  /**\n   * Get the currently connected address\n   * @example\n   * ```javascript\n   * const address = await sdk.wallet.getAddress();\n   * ```\n   */\n  async getAddress() {\n    return await this.requireWallet().getAddress();\n  }\n\n  /**\n   * Get the currently connected wallet's chainId\n   * @internal\n   */\n  async getChainId() {\n    return await this.requireWallet().getChainId();\n  }\n\n  /**\n   * Get the number of transactions sent from this address.\n   * @param blockTag - Optional - the block tag to read the nonce from\n   */\n  async getNonce(blockTag) {\n    const txCount = await this.connection.getProvider().getTransactionCount(await this.getAddress(), blockTag);\n    return txCount;\n  }\n\n  /**\n   * Checks whether there's a signer connected with the SDK\n   * @internal\n   */\n  isConnected() {\n    try {\n      this.requireWallet();\n      return true;\n    } catch (e) {\n      return false;\n    }\n  }\n\n  /**\n   * Sign any message with the connected wallet private key\n   * @param message - the message to sign\n   * @returns the signed message\n   *\n   * @example\n   * ```javascript\n   * // This is the message to be signed\n   * const message = \"Sign this message...\";\n   *\n   * // Now we can sign the message with the connected wallet\n   * const signature = await sdk.wallet.sign(message);\n   * ```\n   */\n  async sign(message) {\n    const signer = this.requireWallet();\n    return await signer.signMessage(message);\n  }\n\n  /**\n   * Sign a typed data structure (EIP712) with the connected wallet private key\n   * @param domain - the domain as EIP712 standard\n   * @param types - the structure and data types as defined by the EIP712 standard\n   * @param message - the data to sign\n   * @returns the payload and its associated signature\n   *\n   * @example\n   * ```javascript\n   * // This is the message to be signed\n   * // Now we can sign the message with the connected wallet\n   * const { payload, signature } = await sdk.wallet.signTypedData(\n   *   {\n          name: \"MyEIP721Domain\",\n          version: \"1\",\n          chainId: 1,\n          verifyingContract: \"0x...\",\n        },\n        { MyStruct: [ { name: \"to\", type: \"address\" }, { name: \"quantity\", type: \"uint256\" } ] },\n        { to: \"0x...\", quantity: 1 },\n   * );\n   * ```\n   */\n  async signTypedData(domain, types, message) {\n    return await signTypedDataInternal(this.requireWallet(), domain, types, message);\n  }\n\n  /**\n   * Recover the signing address from a signed message\n   * @param message - the original message that was signed\n   * @param signature - the signature to recover the address from\n   * @returns the address that signed the message\n   *\n   * @example\n   * ```javascript\n   * const message = \"Sign this message...\";\n   * const signature = await sdk.wallet.sign(message);\n   *\n   * // Now we can recover the signing address\n   * const address = sdk.wallet.recoverAddress(message, signature);\n   * ```\n   */\n  recoverAddress(message, signature) {\n    const messageHash = ethers.utils.hashMessage(message);\n    const messageHashBytes = ethers.utils.arrayify(messageHash);\n    return ethers.utils.recoverAddress(messageHashBytes, signature);\n  }\n\n  /**\n   * Send a raw transaction to the blockchain from the connected wallet\n   * @param transactionRequest - raw transaction data to send to the blockchain\n   */\n  async sendRawTransaction(transactionRequest) {\n    const signer = this.requireWallet();\n    const tx = await signer.sendTransaction(transactionRequest);\n    return {\n      receipt: await tx.wait()\n    };\n  }\n\n  /**\n   * Request funds from a running local node to the currently connected wallet\n   * @param amount the amount in native currency (in ETH) to request\n   */\n  async requestFunds(amount) {\n    const chainId = await this.getChainId();\n    if (chainId === ChainId.Localhost || chainId === ChainId.Hardhat) {\n      const localWallet = new UserWallet(new ethers.Wallet(LOCAL_NODE_PKEY, getChainProvider(chainId, this.options)), this.options);\n      return localWallet.transfer(await this.getAddress(), amount);\n    } else {\n      throw new Error(`Requesting funds is not supported on chain: '${chainId}'.`);\n    }\n  }\n\n  /** ***********************\n   * PRIVATE FUNCTIONS\n   * ***********************/\n\n  requireWallet() {\n    const signer = this.connection.getSigner();\n    invariant(signer, \"This action requires a connected wallet. Please pass a valid signer to the SDK.\");\n    return signer;\n  }\n  createErc20(currencyAddress) {\n    return new ContractWrapper(this.connection.getSignerOrProvider(), currencyAddress, ERC20Abi, this.options);\n  }\n}\n\nfunction extractFeatures(input, enabledExtensions) {\n  if (!input) {\n    return;\n  }\n  for (const extensionKey in input) {\n    const extension = input[extensionKey];\n    // if extension is enabled, then add it to enabledFeatures\n    if (extension.enabled) {\n      enabledExtensions.push(extension);\n    }\n    // recurse\n    extractFeatures(extension.features, enabledExtensions);\n  }\n}\n\n/**\n * Return all the detected features names in the abi\n * @param abi - parsed array of abi entries\n * @returns array of all detected features names\n * @internal\n * @deprecated use getAllExtensionNames instead\n */\nfunction getAllDetectedFeatureNames(abi) {\n  const features = [];\n  extractFeatures(detectFeatures(abi), features);\n  return features.map(f => f.name);\n}\n\n/**\n * Return all the detected extension names in the abi\n * @param abi - parsed array of abi entries\n * @returns array of all detected features names\n * @public\n */\nfunction getAllDetectedExtensionNames(abi) {\n  return getAllDetectedFeatureNames(abi);\n}\n\nfunction createStorage(storage, options) {\n  if (storage) {\n    return storage;\n  } else if (options?.gatewayUrls) {\n    return new ThirdwebStorage({\n      gatewayUrls: options.gatewayUrls\n    });\n  } else {\n    return new ThirdwebStorage();\n  }\n}\n\n/**\n * @internal\n */\nclass MultichainRegistry {\n  constructor(network, storage) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    _defineProperty(this, \"registryLogic\", void 0);\n    _defineProperty(this, \"registryRouter\", void 0);\n    _defineProperty(this, \"storage\", void 0);\n    _defineProperty(this, \"addContract\", buildTransactionFunction(async contract => {\n      return await this.addContracts.prepare([contract]);\n    }));\n    _defineProperty(this, \"addContracts\", buildTransactionFunction(async contracts => {\n      const deployerAddress = await this.registryRouter.getSignerAddress();\n      const encoded = [];\n      contracts.forEach(contact => {\n        encoded.push(this.registryLogic.readContract.interface.encodeFunctionData(\"add\", [deployerAddress, contact.address, contact.chainId, contact.metadataURI || \"\"]));\n      });\n      return Transaction.fromContractWrapper({\n        contractWrapper: this.registryRouter,\n        method: \"multicall\",\n        args: [encoded]\n      });\n    }));\n    _defineProperty(this, \"removeContract\", buildTransactionFunction(async contract => {\n      return await this.removeContracts.prepare([contract]);\n    }));\n    _defineProperty(this, \"removeContracts\", buildTransactionFunction(async contracts => {\n      const deployerAddress = await this.registryRouter.getSignerAddress();\n      const encoded = await Promise.all(contracts.map(async contract => this.registryLogic.readContract.interface.encodeFunctionData(\"remove\", [deployerAddress, await resolveAddress(contract.address), contract.chainId])));\n      return Transaction.fromContractWrapper({\n        contractWrapper: this.registryRouter,\n        method: \"multicall\",\n        args: [encoded]\n      });\n    }));\n    this.storage = storage;\n    this.registryLogic = new ContractWrapper(network, getMultichainRegistryAddress(), TWRegistryABI, options);\n    this.registryRouter = new ContractWrapper(network, getMultichainRegistryAddress(), TWRegistryRouterABI, options);\n  }\n  async updateSigner(signer) {\n    this.registryLogic.updateSignerOrProvider(signer);\n    this.registryRouter.updateSignerOrProvider(signer);\n  }\n  async getContractMetadataURI(chainId, address) {\n    return await this.registryLogic.readContract.getMetadataUri(chainId, await resolveAddress(address));\n  }\n  async getContractMetadata(chainId, address) {\n    const uri = await this.getContractMetadataURI(chainId, address);\n    if (!uri) {\n      throw new Error(`No metadata URI found for contract ${address} on chain ${chainId}`);\n    }\n    // TODO define the metadata JSON schema\n    return await this.storage.downloadJSON(uri);\n  }\n  async getContractAddresses(walletAddress) {\n    return (await this.registryLogic.readContract.getAll(await resolveAddress(walletAddress))).filter(result => utils.isAddress(result.deploymentAddress) && result.deploymentAddress.toLowerCase() !== constants.AddressZero).map(result => ({\n      address: result.deploymentAddress,\n      chainId: result.chainId.toNumber()\n    }));\n  }\n}\n\nasync function getMetadataForPlugins(publishedMetadataUri, storage) {\n  let pluginMetadata = [];\n  const {\n    compilerMetadata,\n    extendedMetadata\n  } = await fetchAndCacheDeployMetadata(publishedMetadataUri, storage);\n  // check if contract is plugin-pattern\n  const isPluginRouter = isFeatureEnabled(AbiSchema.parse(compilerMetadata.abi), \"PluginRouter\");\n  if (isPluginRouter) {\n    if (extendedMetadata && extendedMetadata.factoryDeploymentData?.implementationAddresses) {\n      const implementationsAddresses = Object.entries(extendedMetadata.factoryDeploymentData.implementationAddresses);\n      try {\n        const entry = implementationsAddresses.find(_ref => {\n          let [, implementation] = _ref;\n          return implementation !== \"\";\n        });\n        const [network, implementation] = entry ? entry : [];\n        if (network && implementation) {\n          const provider = getChainProvider(parseInt(network), {});\n          const contract = new ContractWrapper(provider, implementation, getAllPluginsAbi, {});\n          const pluginMap = await contract.call(\"getAllPlugins\");\n\n          // get extension addresses\n          const allPlugins = pluginMap.map(item => item.pluginAddress);\n          const pluginAddresses = Array.from(new Set(allPlugins));\n          const pluginNames = (await Promise.all(pluginAddresses.map(async address => {\n            const metadata = fetchContractMetadataFromAddress(address, provider, storage);\n            return metadata;\n          }))).map(metadata => metadata.name);\n          const pluginUris = await Promise.all(pluginNames.map(name => {\n            return fetchAndCachePublishedContractURI(name);\n          }));\n          pluginMetadata = (await Promise.all(pluginUris.map(async uri => {\n            return fetchAndCacheDeployMetadata(uri, storage);\n          }))).map(fetchedMetadata => fetchedMetadata.compilerMetadata);\n        }\n      } catch {}\n    }\n  }\n  return pluginMetadata;\n}\n\nfunction getFunctionSignature(fnInputs) {\n  return \"(\" + fnInputs.map(i => {\n    return i.type === \"tuple\" ? getFunctionSignature(i.components) : i.type;\n  }).join(\",\") + \")\";\n}\nfunction generatePluginFunctions(pluginAddress, pluginAbi) {\n  const pluginInterface = new ethers.utils.Interface(pluginAbi);\n  const pluginFunctions = [];\n  // TODO - filter out common functions like _msgSender(), contractType(), etc.\n  for (const fnFragment of Object.values(pluginInterface.functions)) {\n    const fn = pluginInterface.getFunction(fnFragment.name);\n    if (fn.name.includes(\"_\")) {\n      continue;\n    }\n    pluginFunctions.push({\n      functionSelector: pluginInterface.getSighash(fn),\n      functionSignature: fn.name + getFunctionSignature(fn.inputs),\n      pluginAddress: pluginAddress\n    });\n  }\n  return pluginFunctions;\n}\n\n/**\n *\n * Returns txn data for keyless deploys as well as signer deploys.\n * Also provides a list of infra contracts to deploy.\n *\n * @internal\n *\n * @param metadataUri\n * @param storage\n * @param provider\n * @param create2Factory\n */\nasync function getDeploymentInfo(metadataUri, storage, provider, create2Factory) {\n  caches.deploymentPresets = {};\n  const create2FactoryAddress = create2Factory ? create2Factory : await getCreate2FactoryAddress(provider);\n  const customParams = {};\n  const finalDeploymentInfo = [];\n  const {\n    compilerMetadata\n  } = await fetchAndCacheDeployMetadata(metadataUri, storage);\n  const pluginMetadata = await getMetadataForPlugins(metadataUri, storage);\n\n  // if pluginMetadata is not empty, then it's a plugin-pattern router contract\n  if (pluginMetadata.length > 0) {\n    // get deployment info for all plugins\n    const pluginDeploymentInfo = await Promise.all(pluginMetadata.map(async metadata => {\n      const info = await computeDeploymentInfo(\"plugin\", provider, storage, create2FactoryAddress, {\n        metadata: metadata\n      });\n      return info;\n    }));\n\n    // create constructor param input for PluginMap\n    const mapInput = [];\n    pluginMetadata.forEach((metadata, index) => {\n      const input = generatePluginFunctions(pluginDeploymentInfo[index].transaction.predictedAddress, metadata.abi);\n      mapInput.push(...input);\n    });\n\n    // get PluginMap deployment transaction\n    const pluginMapTransaction = await computeDeploymentInfo(\"plugin\", provider, storage, create2FactoryAddress, {\n      contractName: \"PluginMap\",\n      constructorParams: {\n        _pluginsToAdd: {\n          value: mapInput\n        }\n      }\n    });\n\n    // address of PluginMap is input for MarketplaceV3's constructor\n    customParams[\"_pluginMap\"] = {\n      value: pluginMapTransaction.transaction.predictedAddress\n    };\n    finalDeploymentInfo.push(...pluginDeploymentInfo, pluginMapTransaction);\n  }\n  const implementationDeployInfo = await computeDeploymentInfo(\"implementation\", provider, storage, create2FactoryAddress, {\n    metadata: compilerMetadata,\n    constructorParams: customParams\n  });\n\n  // get clone factory\n  const factoryInfo = await computeDeploymentInfo(\"infra\", provider, storage, create2FactoryAddress, {\n    contractName: \"TWCloneFactory\"\n  });\n  finalDeploymentInfo.push(factoryInfo);\n  finalDeploymentInfo.push(...Object.values(caches.deploymentPresets));\n  finalDeploymentInfo.push(implementationDeployInfo);\n  return finalDeploymentInfo;\n}\n\n/**\n *\n * @internal\n * @param contractName\n * @param chainId\n * @param storage\n */\nasync function getEncodedConstructorParamsForThirdwebContract(contractName, chainId, storage, constructorParamMap) {\n  const provider = getChainProvider(chainId, {\n    thirdwebApiKey: DEFAULT_API_KEY\n  });\n  const publishUri = await fetchAndCachePublishedContractURI(contractName);\n  const metadata = await fetchAndCacheDeployMetadata(publishUri, storage);\n  const create2Factory = await getCreate2FactoryAddress(provider);\n  invariant(create2Factory, \"Thirdweb stack not found\");\n  const pluginMetadata = await getMetadataForPlugins(publishUri, storage);\n  let encodedArgs;\n\n  // if pluginMetadata is not empty, then it's a plugin-pattern router contract\n  if (pluginMetadata.length > 0) {\n    const deploymentInfo = await getDeploymentInfo(publishUri, storage, provider, create2Factory);\n    encodedArgs = deploymentInfo.find(contract => contract.type === \"implementation\")?.encodedArgs;\n  } else {\n    encodedArgs = await encodeConstructorParamsForImplementation(metadata.compilerMetadata, provider, storage, create2Factory, constructorParamMap);\n  }\n  return encodedArgs;\n}\n\n/**\n *\n * @public\n * @param contractName\n * @param chainId\n * @param storage\n */\nasync function predictThirdwebContractAddress(contractName, chainId, storage) {\n  const provider = getChainProvider(chainId, {\n    thirdwebApiKey: DEFAULT_API_KEY\n  });\n  const publishUri = await fetchAndCachePublishedContractURI(contractName);\n  const create2Factory = await getCreate2FactoryAddress(provider);\n  invariant(create2Factory, \"Thirdweb stack not found\");\n  const pluginMetadata = await getMetadataForPlugins(publishUri, storage);\n\n  // if pluginMetadata is not empty, then it's a plugin-pattern router contract\n  if (pluginMetadata.length > 0) {\n    const deploymentInfo = await getDeploymentInfo(publishUri, storage, provider, create2Factory);\n    const implementation = deploymentInfo.find(contract => contract.type === \"implementation\")?.transaction.predictedAddress;\n    invariant(implementation, \"Error computing address for plugin router\");\n    return implementation;\n  }\n  const implementation = await computeDeploymentInfo(\"implementation\", provider, storage, create2Factory, {\n    contractName: contractName\n  });\n  return implementation.transaction.predictedAddress;\n}\n\n/**\n *\n * @public\n * @param contractName\n * @param chainId\n * @param storage\n */\nasync function getThirdwebContractAddress(contractName, chainId, storage) {\n  const provider = getChainProvider(chainId, {\n    thirdwebApiKey: DEFAULT_API_KEY\n  });\n  const contractAddress = await predictThirdwebContractAddress(contractName, chainId, storage);\n  const isDeployed = await isContractDeployed(contractAddress, provider);\n  invariant(isDeployed, \"Contract not deployed yet\");\n  return contractAddress;\n}\n\nconst VerificationStatus = {\n  FAILED: \"Fail - Unable to verify\",\n  SUCCESS: \"Pass - Verified\",\n  PENDING: \"Pending in queue\",\n  ALREADY_VERIFIED: \"Contract source code already verified\",\n  AUTOMATICALLY_VERIFIED: \"Already Verified\"\n};\n\nconst RequestStatus = {\n  OK: \"1\",\n  NOTOK: \"0\"\n};\n\n//\n// ==================================\n// ======== Core Functions ==========\n// ==================================\n//\n\n/**\n * @public\n *\n * Verifies a Thirdweb Prebuilt Contract, e.g. Marketplace, DropERC721, etc\n *\n * @example\n * ```javascript\n *\n * const explorerAPIUrl = \"\" // e.g. https://api.etherscan.io/api\n * const explorerAPIKey = \"\" // Generate API key on the explorer\n * const chainId = 1 // Change according to the network\n *\n * await sdk.verifier.verifyThirdwebPrebuiltImplementation(\n *   \"DropERC721\",\n *   chainId,\n *   explorerAPIUrl,\n *   explorerAPIKey,\n *   storage // this could be used from the SDK instance, e.g. sdk.storage\n * );\n * ```\n * @param contractName\n * @param chainId\n * @param explorerAPIUrl\n * @param explorerAPIKey\n * @param storage\n */\nasync function verifyThirdwebPrebuiltImplementation(contractName, chainId, explorerAPIUrl, explorerAPIKey, storage, constructorArgs) {\n  const contractAddress = await getThirdwebContractAddress(contractName, chainId, storage);\n  const encodedArgs = await getEncodedConstructorParamsForThirdwebContract(contractName, chainId, storage, constructorArgs);\n  console.info(`Verifying ${contractName} at address ${contractAddress}`);\n  const guid = await verify(contractAddress, chainId, explorerAPIUrl, explorerAPIKey, storage, encodedArgs?.toString().replace(\"0x\", \"\"));\n  return guid;\n}\n\n/**\n * @public\n *\n * Verifies any contract\n *\n * @example\n * ```javascript\n *\n * const contractAddress = \"\"\n * const explorerAPIUrl = \"\" // e.g. https://api.etherscan.io/api\n * const explorerAPIKey = \"\" // Generate API key on the explorer\n * const chainId = 1 // Change according to the network\n *\n * await sdk.verifier.verify(\n *   contractAddress,\n *   chainId,\n *   explorerAPIUrl,\n *   explorerAPIKey,\n *   storage // this could be used from the SDK instance, e.g. sdk.storage\n * );\n * ```\n * @param contractAddress\n * @param chainId\n * @param explorerAPIUrl\n * @param explorerAPIKey\n * @param storage\n */\nasync function verify(contractAddress, chainId, explorerAPIUrl, explorerAPIKey, storage, encodedConstructorArgs) {\n  try {\n    const provider = getChainProvider(chainId, {});\n    const compilerMetadata = await fetchContractMetadataFromAddress(contractAddress, provider, storage);\n    const compilerVersion = compilerMetadata.metadata.compiler.version;\n    const sources = await fetchSourceFilesFromMetadata(compilerMetadata, storage);\n    const sourcesWithUrl = compilerMetadata.metadata.sources;\n    const sourcesWithContents = {};\n    for (const path of Object.keys(sourcesWithUrl)) {\n      const sourceCode = sources.find(source => path === source.filename);\n      if (!sourceCode) {\n        throw new Error(`Could not find source file for ${path}`);\n      }\n      sourcesWithContents[path] = {\n        content: sourceCode.source\n      };\n    }\n    const compilerInput = {\n      language: \"Solidity\",\n      sources: sourcesWithContents,\n      settings: {\n        optimizer: compilerMetadata.metadata.settings.optimizer,\n        evmVersion: compilerMetadata.metadata.settings.evmVersion,\n        remappings: compilerMetadata.metadata.settings.remappings,\n        outputSelection: {\n          \"*\": {\n            \"*\": [\"abi\", \"evm.bytecode\", \"evm.deployedBytecode\", \"evm.methodIdentifiers\", \"metadata\"],\n            \"\": [\"ast\"]\n          }\n        }\n      }\n    };\n    const compilationTarget = compilerMetadata.metadata.settings.compilationTarget;\n    const targets = Object.keys(compilationTarget);\n    const contractPath = targets[0];\n    const encodedArgs = encodedConstructorArgs ? encodedConstructorArgs : await fetchConstructorParams(explorerAPIUrl, explorerAPIKey, contractAddress, compilerMetadata.abi, provider, storage);\n    const requestBody = {\n      apikey: explorerAPIKey,\n      module: \"contract\",\n      action: \"verifysourcecode\",\n      contractaddress: contractAddress,\n      sourceCode: JSON.stringify(compilerInput),\n      codeformat: \"solidity-standard-json-input\",\n      contractname: `${contractPath}:${compilerMetadata.name}`,\n      compilerversion: `v${compilerVersion}`,\n      constructorArguements: encodedArgs\n    };\n    const parameters = new URLSearchParams({\n      ...requestBody\n    });\n    const result = await fetch(explorerAPIUrl, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\"\n      },\n      body: parameters.toString()\n    });\n    const data = await result.json();\n    if (data.status === RequestStatus.OK) {\n      return data.result;\n    } else {\n      throw new Error(`${data.result}`);\n    }\n  } catch (e) {\n    throw new Error(e.toString());\n  }\n}\n\n//\n// ==================================\n// ======== Helper Functions ========\n// ==================================\n//\n\n/**\n * @internal\n *\n * Check status of the contract submitted for verification to the explorer\n * @param explorerAPIUrl\n * @param explorerAPIKey\n * @param guid\n */\nasync function checkVerificationStatus(explorerAPIUrl, explorerAPIKey, guid) {\n  const endpoint = `${explorerAPIUrl}?module=contract&action=checkverifystatus&guid=${guid}&apikey=${explorerAPIKey}\"`;\n  return new Promise((resolve, reject) => {\n    const intervalId = setInterval(async () => {\n      try {\n        const result = await fetch(endpoint, {\n          method: \"GET\"\n        });\n        const data = await result.json();\n        if (data?.result !== VerificationStatus.PENDING) {\n          clearInterval(intervalId);\n          resolve(data);\n        }\n      } catch (e) {\n        clearInterval(intervalId);\n        reject(e);\n      }\n    }, 3000);\n  });\n}\n\n/**\n * @internal\n *\n * Check if the contract is already verified on etherscan\n * @param contractAddress\n * @param chainId\n * @param explorerAPIUrl\n * @param explorerAPIKey\n */\nasync function isVerifiedOnEtherscan(contractAddress, chainId, explorerAPIUrl, explorerAPIKey) {\n  const provider = getChainProvider(chainId, {\n    thirdwebApiKey: DEFAULT_API_KEY\n  });\n  invariant(await isContractDeployed(contractAddress, provider), \"Contract not deployed yet.\");\n  const endpoint = `${explorerAPIUrl}?module=contract&action=getsourcecode&address=${contractAddress}&apikey=${explorerAPIKey}\"`;\n  try {\n    const result = await fetch(endpoint, {\n      method: \"GET\",\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json;charset=UTF-8\"\n      }\n    });\n    const data = await result.json();\n    const etherscanResult = data.result[0];\n    if (etherscanResult.ABI === \"Contract source code not verified\") {\n      return false;\n    }\n    return true;\n  } catch (e) {\n    throw new Error(`Error checking verification for contract ${contractAddress}: ${e}`);\n  }\n}\n\n/**\n * @internal\n *\n * Fetch the deploy transaction from the given contract address and extract the encoded constructor parameters\n * @param explorerAPIUrl\n * @param explorerAPIKey\n * @param contractAddress\n * @param abi\n * @param provider\n * @param storage\n */\nasync function fetchConstructorParams(explorerAPIUrl, explorerAPIKey, contractAddress, abi, provider, storage) {\n  const constructorParamTypes = extractConstructorParamsFromAbi(abi);\n  if (constructorParamTypes.length === 0) {\n    return \"\";\n  }\n  const requestBody = {\n    apiKey: explorerAPIKey,\n    module: \"account\",\n    action: \"txlist\",\n    address: contractAddress,\n    page: \"1\",\n    sort: \"asc\",\n    offset: \"1\"\n  };\n  const parameters = new URLSearchParams({\n    ...requestBody\n  });\n  const result = await fetch(explorerAPIUrl, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/x-www-form-urlencoded\"\n    },\n    body: parameters.toString()\n  });\n  const data = await result.json();\n  if (data && data.status === RequestStatus.OK && data.result[0] !== undefined) {\n    const contract = new utils.Interface(abi);\n    const txDeployBytecode = data.result[0].input;\n    let constructorArgs = \"\";\n    if (contract.deploy.inputs.length === 0) {\n      return \"\";\n    }\n\n    // first: attempt to get it from Publish\n    try {\n      const bytecode = await fetchDeployBytecodeFromPublishedContractMetadata(contractAddress, provider, storage);\n      if (bytecode) {\n        // contract was realeased, use the deployable bytecode method (proper solution)\n        const bytecodeHex = bytecode.startsWith(\"0x\") ? bytecode : `0x${bytecode}`;\n        constructorArgs = txDeployBytecode.substring(bytecodeHex.length);\n      }\n    } catch (e) {\n      // contracts not published through thirdweb\n    }\n\n    // second: attempt to decode it from solc metadata bytecode\n    if (!constructorArgs) {\n      // couldn't find bytecode from Publish, using regex to locate consturctor args thruogh solc metadata\n      // https://docs.soliditylang.org/en/v0.8.17/metadata.html#encoding-of-the-metadata-hash-in-the-bytecode\n      // {6} = solc version\n      // {4} = 0033, but noticed some contracts have values other than 00 33. (uniswap)\n      const matches = [...txDeployBytecode.matchAll(/(64736f6c6343[\\w]{6}[\\w]{4})(?!.*\\1)(.*)$/g)];\n\n      // regex finds the LAST occurence of solc metadata bytes, result always in same position\n      if (matches.length > 0) {\n        // TODO: we currently don't handle error string embedded in the bytecode, need to strip ascii (upgradeableProxy) in patterns[2]\n        // https://etherscan.io/address/0xee6a57ec80ea46401049e92587e52f5ec1c24785#code\n        constructorArgs = matches[0][2];\n      }\n    }\n\n    // third: attempt to guess it from the ABI inputs\n    if (!constructorArgs) {\n      // TODO: need to guess array / struct properly\n      const constructorParamByteLength = constructorParamTypes.length * 64;\n      constructorArgs = txDeployBytecode.substring(txDeployBytecode.length - constructorParamByteLength);\n    }\n    try {\n      // sanity check that the constructor params are valid\n      // TODO: should we sanity check after each attempt?\n      utils.defaultAbiCoder.decode(contract.deploy.inputs, `0x${constructorArgs}`);\n    } catch (e) {\n      throw new Error(\"Verifying this contract requires it to be published. Run `npx thirdweb publish` to publish this contract, then try again.\");\n    }\n    return constructorArgs;\n  } else {\n    // Could not retrieve constructor parameters, using empty parameters as fallback\n    return \"\";\n  }\n}\n\n/**\n * @internal\n *\n * Fetches the Publish metadata on the ContractPublisher registry (on polygon) for the given contract address (on any chain)\n * @param contractAddress\n * @param provider\n * @param storage\n * @returns\n */\nasync function fetchDeployBytecodeFromPublishedContractMetadata(contractAddress, provider, storage) {\n  const compilerMetaUri = await resolveContractUriFromAddress(contractAddress, provider);\n  if (compilerMetaUri) {\n    const contract = new Contract(getContractPublisherAddress(), ContractPublisherAbi, getChainProvider(\"polygon\", {}));\n    const publishedMetadataUri = await contract.getPublishedUriFromCompilerUri(compilerMetaUri);\n    if (publishedMetadataUri.length === 0) {\n      throw Error(`Could not resolve published metadata URI from ${compilerMetaUri}`);\n    }\n    const pubmeta = await Promise.all(publishedMetadataUri.filter(uri => uri.length > 0).map(uri => fetchExtendedReleaseMetadata(uri, storage)));\n    return pubmeta.length > 0 ? await (await storage.download(pubmeta[0].bytecodeUri)).text() : undefined;\n  }\n  return undefined;\n}\n\n/**\n * Handles verification of new contracts on any EVM\n * @public\n */\nclass ContractVerifier extends RPCConnectionHandler {\n  constructor(network, options, storage) {\n    super(network, options);\n    _defineProperty(this, \"storage\", void 0);\n    this.storage = storage;\n  }\n  updateSignerOrProvider(network) {\n    super.updateSignerOrProvider(network);\n  }\n\n  /**\n   * Verifies a Thirdweb contract\n   *\n   * @example\n   * ```javascript\n   *\n   * // Note: If verifying on a network different from the SDK instance's network,\n   * //       update the verifier's chain/network as below:\n   * //\n   * //       sdk.verifier.updateSignerOrProvider(chainId);\n   *\n   * const explorerAPIUrl = \"\" // e.g. https://api.etherscan.io/api\n   * const explorerAPIKey = \"\" // Generate API key on the explorer\n   *\n   * await sdk.verifier.verifyThirdwebContract(\n   *   \"DropERC721\",\n   *   explorerAPIUrl,\n   *   explorerAPIKey,\n   * );\n   * ```\n   * @param contractName\n   * @param explorerAPIUrl\n   * @param explorerAPIKey\n   */\n  async verifyThirdwebContract(contractName, explorerAPIUrl, explorerAPIKey, constructorArgs) {\n    const chainId = (await this.getProvider().getNetwork()).chainId;\n    const guid = await verifyThirdwebPrebuiltImplementation(contractName, chainId, explorerAPIUrl, explorerAPIKey, this.storage, constructorArgs);\n    console.info(\"Checking verification status...\");\n    const verificationStatus = await checkVerificationStatus(explorerAPIUrl, explorerAPIKey, guid);\n    console.info(verificationStatus);\n  }\n\n  /**\n   * Verifies any contract\n   *\n   * @example\n   * ```javascript\n   *\n   * // Note: If verifying on a network different from the SDK instance's network,\n   * //       update the verifier's chain/network as below:\n   * //\n   * //       sdk.verifier.updateSignerOrProvider(chainId);\n   *\n   * const contractAddress = \"\"\n   * const explorerAPIUrl = \"\" // e.g. https://api.etherscan.io/api\n   * const explorerAPIKey = \"\" // Generate API key on the explorer\n   *\n   * await sdk.verifier.verifyContract(\n   *   contractAddress,\n   *   explorerAPIUrl,\n   *   explorerAPIKey,\n   * );\n   * ```\n   * @param contractAddress\n   * @param explorerAPIUrl\n   * @param explorerAPIKey\n   */\n  async verifyContract(contractAddress, explorerAPIUrl, explorerAPIKey, constructorArgs) {\n    const chainId = (await this.getProvider().getNetwork()).chainId;\n    let encodedArgs;\n    if (constructorArgs) {\n      const paramTypes = Object.values(constructorArgs).map(arg => {\n        invariant(arg.type, \"Param type is required\");\n        return arg.type;\n      });\n      const paramValues = Object.values(constructorArgs).map(arg => {\n        return arg.value;\n      });\n      encodedArgs = ethers.utils.defaultAbiCoder.encode(paramTypes, paramValues);\n    }\n    const guid = await verify(contractAddress, chainId, explorerAPIUrl, explorerAPIKey, this.storage, encodedArgs);\n    console.info(\"Checking verification status...\");\n    const verificationStatus = await checkVerificationStatus(explorerAPIUrl, explorerAPIKey, guid);\n    console.info(verificationStatus);\n  }\n}\n\n/**\n *\n * @param abi\n * @param functionName\n * @returns\n * @internal\n */\nfunction extractFunctionParamsFromAbi(abi, functionName) {\n  const parsedAbi = AbiSchema.parse(abi || []);\n  for (const input of parsedAbi) {\n    if (input.type === \"function\" && input.name === functionName) {\n      return input.inputs || [];\n    }\n  }\n  return [];\n}\n\n/**\n *\n * @internal\n * @param provider\n * @param storage\n * @param create2Factory\n */\nasync function computeCloneFactoryAddress(provider, storage, create2Factory) {\n  if (!create2Factory) {\n    create2Factory = await getCreate2FactoryAddress(provider);\n  }\n  return (await computeDeploymentInfo(\"infra\", provider, storage, create2Factory, {\n    contractName: \"TWCloneFactory\"\n  })).transaction.predictedAddress;\n}\n\nfunction convertParamValues(constructorParamTypes, constructorParamValues) {\n  // check that both arrays are same length\n  if (constructorParamTypes.length !== constructorParamValues.length) {\n    throw Error(`Passed the wrong number of constructor arguments: ${constructorParamValues.length}, expected ${constructorParamTypes.length}`);\n  }\n  return constructorParamTypes.map((p, index) => {\n    if (p === \"tuple\" || p.endsWith(\"[]\")) {\n      if (typeof constructorParamValues[index] === \"string\") {\n        return JSON.parse(constructorParamValues[index]);\n      } else {\n        return constructorParamValues[index];\n      }\n    }\n    if (p === \"bytes32\") {\n      invariant(ethers.utils.isHexString(constructorParamValues[index]), `Could not parse bytes32 value. Expected valid hex string but got \"${constructorParamValues[index]}\".`);\n      return ethers.utils.hexZeroPad(constructorParamValues[index], 32);\n    }\n    if (p.startsWith(\"bytes\")) {\n      invariant(ethers.utils.isHexString(constructorParamValues[index]), `Could not parse bytes value. Expected valid hex string but got \"${constructorParamValues[index]}\".`);\n      return constructorParamValues[index];\n    }\n    if (p.startsWith(\"uint\") || p.startsWith(\"int\")) {\n      return BigNumber.from(constructorParamValues[index].toString());\n    }\n    return constructorParamValues[index];\n  });\n}\n\nfunction estimateGasForDeploy(initCode) {\n  let gasLimit = ethers.utils.arrayify(initCode).map(x => x === 0 ? 4 : 16).reduce((sum, x) => sum + x) + 200 * initCode.length / 2 + 6 * Math.ceil(initCode.length / 64) + 32000 + 21000;\n  gasLimit = Math.floor(gasLimit * 64 / 63);\n  return gasLimit;\n}\n\nfunction createTransactionBatches(transactions) {\n  let upperGasLimit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : GAS_LIMIT_FOR_DEPLOYER;\n  transactions = transactions.filter(tx => {\n    return tx.data.length > 0;\n  });\n  if (transactions.length === 0) {\n    return [];\n  }\n  let transactionBatches = [];\n  let sum = 0;\n  let batch = [];\n  transactions.forEach(tx => {\n    const gas = estimateGasForDeploy(tx.data);\n    if (sum + gas > upperGasLimit) {\n      if (batch.length === 0) {\n        transactionBatches.push([tx]);\n      } else {\n        transactionBatches.push(batch);\n        sum = gas;\n        batch = [tx];\n      }\n    } else {\n      sum += gas;\n      batch.push(tx);\n    }\n  });\n  if (batch.length > 0) {\n    transactionBatches.push(batch);\n  }\n  return transactionBatches;\n}\n\n/**\n * Deploy a contract at a deterministic address, using Create2 method\n * Address depends on the Create2 factory address.\n *\n * @public\n *\n * @param signer\n * @param bytecode\n * @param encodedArgs\n * @param create2FactoryAddress\n */\nasync function deployContractDeterministic(signer, transaction, options) {\n  let gasLimit = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 7000000;\n  // Check if the implementation contract is already deployed\n  invariant(signer.provider, \"Provider required\");\n  const contractDeployed = await isContractDeployed(transaction.predictedAddress, signer.provider);\n  if (!contractDeployed) {\n    console.debug(`deploying contract via create2 factory at: ${transaction.predictedAddress}`);\n    let tx = {\n      to: transaction.to,\n      data: transaction.data\n    };\n    try {\n      await signer.estimateGas(tx);\n    } catch (e) {\n      console.debug(\"error estimating gas while deploying prebuilt: \", e);\n      tx.gasLimit = BigNumber.from(gasLimit);\n    }\n    options?.notifier?.(\"deploying\", \"preset\");\n    await (await signer.sendTransaction(tx)).wait();\n    options?.notifier?.(\"deployed\", \"preset\");\n  }\n}\n\nfunction toWei(amount) {\n  return utils.parseEther(AmountSchema.parse(amount));\n}\n\n/**\n * Deploy Nick's Create2 factory on a given network.\n * Deployment is keyless. Signer is needed to fund the keyless signer address.\n * Ref: https://github.com/Arachnid/deterministic-deployment-proxy\n *\n * @public\n * @param signer\n */\nasync function deployCreate2Factory(signer, options) {\n  invariant(signer.provider, \"No provider\");\n  const commonFactoryExists = await isContractDeployed(COMMON_FACTORY, signer.provider);\n  if (commonFactoryExists) {\n    return COMMON_FACTORY;\n  }\n  const enforceEip155 = await isEIP155Enforced(signer.provider);\n  const networkId = (await signer.provider.getNetwork()).chainId;\n  const chainId = enforceEip155 ? networkId : 0;\n  console.debug(`ChainId ${networkId} enforces EIP155: ${enforceEip155}`);\n  const deploymentInfo = CUSTOM_GAS_FOR_CHAIN[networkId] ? getCreate2FactoryDeploymentInfo(chainId, CUSTOM_GAS_FOR_CHAIN[networkId].gasPrice) : getCreate2FactoryDeploymentInfo(chainId);\n  const factoryExists = await isContractDeployed(deploymentInfo.deployment, signer.provider);\n\n  // deploy community factory if not already deployed\n  if (!factoryExists) {\n    // send balance to the keyless signer\n    const valueToSend = CUSTOM_GAS_FOR_CHAIN[networkId] ? BigNumber.from(CUSTOM_GAS_FOR_CHAIN[networkId].gasPrice).mul(100000) : toWei(\"0.01\");\n    if ((await signer.provider.getBalance(deploymentInfo.signer)).lt(valueToSend)) {\n      await (await signer.sendTransaction({\n        to: deploymentInfo.signer,\n        value: valueToSend\n      })).wait();\n    }\n\n    // deploy\n    try {\n      console.debug(`deploying CREATE2 factory at: ${deploymentInfo.deployment}`);\n      options?.notifier?.(\"deploying\", \"create2Factory\");\n      await (await signer.provider.sendTransaction(deploymentInfo.transaction)).wait();\n      options?.notifier?.(\"deployed\", \"create2Factory\");\n    } catch (err) {\n      throw new Error(`Couldn't deploy CREATE2 factory: ${JSON.stringify(err)}`);\n    }\n  }\n  return deploymentInfo.deployment;\n}\n\nasync function deployWithThrowawayDeployer(signer, transactions, options) {\n  let transactionBatches = createTransactionBatches(transactions);\n  if (transactionBatches.length === 0) {\n    return;\n  }\n  options?.notifier?.(\"deploying\", \"infra\");\n  const deployTxns = await Promise.all(transactionBatches.map(txBatch => {\n    // Using the deployer contract, send the deploy transactions to common factory with a signer\n    const deployer = new ethers.ContractFactory(DEPLOYER_ABI, DEPLOYER_BYTECODE).connect(signer).deploy(txBatch);\n    return deployer;\n  }));\n  await Promise.all(deployTxns.map(tx => {\n    return tx.deployed();\n  }));\n  options?.notifier?.(\"deployed\", \"infra\");\n}\n\n/**\n * @public\n */\nconst SUPPORTED_CHAIN_IDS = [ChainId.Mainnet, ChainId.Goerli, ChainId.Polygon, ChainId.Mumbai, ChainId.Fantom, ChainId.FantomTestnet, ChainId.Avalanche, ChainId.AvalancheFujiTestnet, ChainId.Optimism, ChainId.OptimismGoerli, ChainId.Arbitrum, ChainId.ArbitrumGoerli, ChainId.BinanceSmartChainMainnet, ChainId.BinanceSmartChainTestnet, ChainId.Hardhat, ChainId.Localhost];\n\n/**\n *\n * @param chainId - chain id\n * @returns the array of trusted forwarders for the given chain id\n * @internal\n */\nfunction getDefaultTrustedForwarders(chainId) {\n  const chainEnum = SUPPORTED_CHAIN_IDS.find(c => c === chainId);\n  const biconomyForwarder = chainEnum ? CONTRACT_ADDRESSES[chainEnum].biconomyForwarder : AddressZero;\n  const openzeppelinForwarder = chainEnum ? CONTRACT_ADDRESSES[chainEnum].openzeppelinForwarder : AddressZero;\n  return [openzeppelinForwarder, biconomyForwarder].filter(a => a !== AddressZero);\n}\n\n/**\n *\n * @param contractType\n * @param metadata\n * @param contractURI\n * @returns\n * @internal\n */\nasync function getDeployArguments(contractType, metadata, contractURI, signer, storage) {\n  const chainId = await signer.getChainId();\n  const signerAddress = await signer.getAddress();\n  const chainEnum = SUPPORTED_CHAIN_IDS.find(c => c === chainId);\n  let trustedForwarders = [];\n  if (!chainEnum) {\n    const forwarder = await computeForwarderAddress(signer.provider, storage);\n    trustedForwarders = [forwarder];\n  } else {\n    trustedForwarders = contractType === PackInitializer.contractType ? [] : getDefaultTrustedForwarders(chainId);\n  }\n\n  // add default forwarders to any custom forwarders passed in\n  if (metadata.trusted_forwarders && metadata.trusted_forwarders.length > 0) {\n    trustedForwarders.push(...metadata.trusted_forwarders);\n  }\n  switch (contractType) {\n    case NFTDropInitializer.contractType:\n    case NFTCollectionInitializer.contractType:\n      const erc721metadata = await NFTDropInitializer.schema.deploy.parseAsync(metadata);\n      return [signerAddress, erc721metadata.name, erc721metadata.symbol, contractURI, trustedForwarders, erc721metadata.primary_sale_recipient, erc721metadata.fee_recipient, erc721metadata.seller_fee_basis_points, erc721metadata.platform_fee_basis_points, erc721metadata.platform_fee_recipient];\n    case SignatureDropInitializer.contractType:\n      const signatureDropmetadata = await SignatureDropInitializer.schema.deploy.parseAsync(metadata);\n      return [signerAddress, signatureDropmetadata.name, signatureDropmetadata.symbol, contractURI, trustedForwarders, signatureDropmetadata.primary_sale_recipient, signatureDropmetadata.fee_recipient, signatureDropmetadata.seller_fee_basis_points, signatureDropmetadata.platform_fee_basis_points, signatureDropmetadata.platform_fee_recipient];\n    case MultiwrapInitializer.contractType:\n      const multiwrapMetadata = await MultiwrapInitializer.schema.deploy.parseAsync(metadata);\n      return [signerAddress, multiwrapMetadata.name, multiwrapMetadata.symbol, contractURI, trustedForwarders, multiwrapMetadata.fee_recipient, multiwrapMetadata.seller_fee_basis_points];\n    case EditionDropInitializer.contractType:\n    case EditionInitializer.contractType:\n      const erc1155metadata = await EditionDropInitializer.schema.deploy.parseAsync(metadata);\n      return [signerAddress, erc1155metadata.name, erc1155metadata.symbol, contractURI, trustedForwarders, erc1155metadata.primary_sale_recipient, erc1155metadata.fee_recipient, erc1155metadata.seller_fee_basis_points, erc1155metadata.platform_fee_basis_points, erc1155metadata.platform_fee_recipient];\n    case TokenDropInitializer.contractType:\n    case TokenInitializer.contractType:\n      const erc20metadata = await TokenInitializer.schema.deploy.parseAsync(metadata);\n      return [signerAddress, erc20metadata.name, erc20metadata.symbol, contractURI, trustedForwarders, erc20metadata.primary_sale_recipient, erc20metadata.platform_fee_recipient, erc20metadata.platform_fee_basis_points];\n    case VoteInitializer.contractType:\n      const voteMetadata = await VoteInitializer.schema.deploy.parseAsync(metadata);\n      return [voteMetadata.name, contractURI, trustedForwarders, voteMetadata.voting_token_address, voteMetadata.voting_delay_in_blocks, voteMetadata.voting_period_in_blocks, BigNumber.from(voteMetadata.proposal_token_threshold), voteMetadata.voting_quorum_fraction];\n    case SplitInitializer.contractType:\n      const splitsMetadata = await SplitInitializer.schema.deploy.parseAsync(metadata);\n      return [signerAddress, contractURI, trustedForwarders, splitsMetadata.recipients.map(s => s.address), splitsMetadata.recipients.map(s => BigNumber.from(s.sharesBps))];\n    case MarketplaceInitializer.contractType:\n    case MarketplaceV3Initializer.contractType:\n      const marketplaceMetadata = await MarketplaceInitializer.schema.deploy.parseAsync(metadata);\n      return [signerAddress, contractURI, trustedForwarders, marketplaceMetadata.platform_fee_recipient, marketplaceMetadata.platform_fee_basis_points];\n    case PackInitializer.contractType:\n      const packsMetadata = await PackInitializer.schema.deploy.parseAsync(metadata);\n      return [signerAddress, packsMetadata.name, packsMetadata.symbol, contractURI, trustedForwarders, packsMetadata.fee_recipient, packsMetadata.seller_fee_basis_points];\n    default:\n      return [];\n  }\n}\nasync function getTrustedForwarders(provider, storage, contractName) {\n  const chainId = (await provider.getNetwork()).chainId;\n  const chainEnum = SUPPORTED_CHAIN_IDS.find(c => c === chainId);\n  let trustedForwarders = contractName && contractName === PackInitializer.name ? [] : chainEnum ? getDefaultTrustedForwarders(chainId) : [await computeForwarderAddress(provider, storage)]; // TODO: make this default for all chains (standard + others)\n\n  return trustedForwarders;\n}\n\n// @deprecated - should not be needed anymore, rely on the publish data instead\nconst APPROVED_IMPLEMENTATIONS = {\n  [ChainId.Mainnet]: {\n    \"nft-drop\": \"0x60fF9952e0084A6DEac44203838cDC91ABeC8736\",\n    \"edition-drop\": \"0x74af262d0671F378F97a1EDC3d0970Dbe8A1C550\",\n    \"token-drop\": \"0xE1eE43D23f247b6A9aF81fcE2766E76709482728\",\n    \"signature-drop\": \"0x6fD690EB509BdE4C50028C5D9C0dE3750C2Fad6A\"\n  },\n  [ChainId.Polygon]: {\n    \"nft-drop\": \"0xB96508050Ba0925256184103560EBADA912Fcc69\",\n    \"edition-drop\": \"0x74af262d0671F378F97a1EDC3d0970Dbe8A1C550\",\n    \"token-drop\": \"0x5A8eA4Adad8289746D073947BA06D69A62499aaf\",\n    \"signature-drop\": \"0xBE2fDc35410E268e41Bec62DBb01AEb43245c7d5\"\n  },\n  [ChainId.Fantom]: {\n    \"nft-drop\": \"0x2A396b2D90BAcEF19cDa973586B2633d22710fC2\",\n    \"edition-drop\": \"0x06395FCF9AC6ED827f9dD6e776809cEF1Be0d21B\",\n    \"token-drop\": \"0x0148b28a38efaaC31b6aa0a6D9FEb70FE7C91FFa\",\n    \"signature-drop\": \"0xe135Ef65C2B2213C3fD56d0Bd6500A2cA147aC10\"\n  },\n  [ChainId.Avalanche]: {\n    \"nft-drop\": \"0x9cF91118C8ee2913F0588e0F10e36B3d63F68bF6\",\n    \"edition-drop\": \"0x135fC9D26E5eC51260ece1DF4ED424E2f55c7766\",\n    \"token-drop\": \"0xca0B071899E575BA86495D46c5066971b6f3A901\",\n    \"signature-drop\": \"0x1d47526C3292B0130ef0afD5F02c1DA052A017B3\"\n  },\n  [ChainId.Optimism]: {\n    \"nft-drop\": \"0xFBd7D24d80ee005671E731a7287DEB6073264dD1\",\n    \"edition-drop\": \"0xe135Ef65C2B2213C3fD56d0Bd6500A2cA147aC10\",\n    \"token-drop\": \"0x902Dd246e66d8C3CE652375a723F2a52b43b9AAE\",\n    \"signature-drop\": \"0x8a4cd3549e548bbEEb38C16E041FFf040a5acabD\"\n  },\n  [ChainId.Arbitrum]: {\n    \"nft-drop\": \"0xC4903c1Ff5367b9ac2c349B63DC2409421AaEE2a\",\n    \"edition-drop\": \"0xCcddcec1831646Beff2753249f1B9C580327E89F\",\n    \"token-drop\": \"0x1b5947e1a2d5a29D0df20931DeAB0B87818209B9\",\n    \"signature-drop\": \"0x2dF9851af45dd41C8584ac55D983C604da985Bc7\"\n  },\n  [ChainId.BinanceSmartChainMainnet]: {\n    \"nft-drop\": \"0x902Dd246e66d8C3CE652375a723F2a52b43b9AAE\",\n    \"edition-drop\": \"0x2A396b2D90BAcEF19cDa973586B2633d22710fC2\",\n    \"token-drop\": \"0xe135Ef65C2B2213C3fD56d0Bd6500A2cA147aC10\",\n    \"signature-drop\": \"0xFBd7D24d80ee005671E731a7287DEB6073264dD1\"\n  },\n  [ChainId.Goerli]: {\n    \"nft-drop\": \"0xD11c97DD5F5546B5bBd630D7D1d7327481B0b92C\",\n    \"edition-drop\": \"0x5A8eA4Adad8289746D073947BA06D69A62499aaf\",\n    \"token-drop\": \"0x5680933221B752EB443654a014f88B101F868d50\",\n    \"signature-drop\": \"0x1b5947e1a2d5a29D0df20931DeAB0B87818209B9\"\n  },\n  [ChainId.Mumbai]: {\n    \"nft-drop\": \"0xC4903c1Ff5367b9ac2c349B63DC2409421AaEE2a\",\n    \"edition-drop\": \"0xCcddcec1831646Beff2753249f1B9C580327E89F\",\n    \"token-drop\": \"0x1b5947e1a2d5a29D0df20931DeAB0B87818209B9\",\n    \"signature-drop\": \"0x2dF9851af45dd41C8584ac55D983C604da985Bc7\"\n  },\n  [ChainId.FantomTestnet]: {\n    \"nft-drop\": \"0x8a4cd3549e548bbEEb38C16E041FFf040a5acabD\",\n    \"edition-drop\": \"0x902Dd246e66d8C3CE652375a723F2a52b43b9AAE\",\n    \"token-drop\": \"0xFBd7D24d80ee005671E731a7287DEB6073264dD1\",\n    \"signature-drop\": \"0x5A8eA4Adad8289746D073947BA06D69A62499aaf\"\n  },\n  [ChainId.AvalancheFujiTestnet]: {\n    \"nft-drop\": \"0xD11c97DD5F5546B5bBd630D7D1d7327481B0b92C\",\n    \"edition-drop\": \"0xE1eE43D23f247b6A9aF81fcE2766E76709482728\",\n    \"token-drop\": \"0x6fD690EB509BdE4C50028C5D9C0dE3750C2Fad6A\",\n    \"signature-drop\": \"0xCcddcec1831646Beff2753249f1B9C580327E89F\"\n  },\n  [ChainId.OptimismGoerli]: {\n    \"nft-drop\": \"0xCcddcec1831646Beff2753249f1B9C580327E89F\",\n    \"edition-drop\": \"0x6fD690EB509BdE4C50028C5D9C0dE3750C2Fad6A\",\n    \"token-drop\": \"0xD11c97DD5F5546B5bBd630D7D1d7327481B0b92C\",\n    \"signature-drop\": \"0x1b5947e1a2d5a29D0df20931DeAB0B87818209B9\"\n  },\n  [ChainId.ArbitrumGoerli]: {\n    \"nft-drop\": \"0x9CfE807a5b124b962064Fa8F7FD823Cc701255b6\",\n    \"edition-drop\": \"0x9cF91118C8ee2913F0588e0F10e36B3d63F68bF6\",\n    \"token-drop\": \"0x1d47526C3292B0130ef0afD5F02c1DA052A017B3\",\n    \"signature-drop\": \"0xE1eE43D23f247b6A9aF81fcE2766E76709482728\"\n  },\n  [ChainId.BinanceSmartChainTestnet]: {\n    \"nft-drop\": \"\",\n    \"edition-drop\": \"\",\n    \"token-drop\": \"\",\n    \"signature-drop\": \"\" // TODO\n  },\n\n  [ChainId.Hardhat]: {\n    \"nft-drop\": \"\",\n    \"edition-drop\": \"\",\n    \"token-drop\": \"\",\n    \"signature-drop\": \"\" // TODO\n  },\n\n  [ChainId.Localhost]: {\n    \"nft-drop\": \"\",\n    \"edition-drop\": \"\",\n    \"token-drop\": \"\",\n    \"signature-drop\": \"\" // TODO\n  }\n};\n\n/**\n * @internal\n * @param chainId\n * @param contractType\n */\nfunction getApprovedImplementation(chainId,\n// TODO use SupportedChainId once we deploy to all chains\ncontractType) {\n  if (chainId in APPROVED_IMPLEMENTATIONS) {\n    const approvedImpls = APPROVED_IMPLEMENTATIONS[chainId];\n    if (contractType in approvedImpls) {\n      return approvedImpls[contractType];\n    }\n  }\n  return null;\n}\n\n/**\n * @internal\n */\nclass ContractFactory extends ContractWrapper {\n  // Map from contract type to version to deploy specific versions by default\n\n  constructor(factoryAddr, network, storage, _options) {\n    super(network, factoryAddr, TWFactoryAbi, _options);\n    _defineProperty(this, \"storage\", void 0);\n    _defineProperty(this, \"DEFAULT_VERSION_MAP\", {\n      [NFTDropInitializer.contractType]: 3,\n      [NFTCollectionInitializer.contractType]: 1,\n      [SignatureDropInitializer.contractType]: 4,\n      [MultiwrapInitializer.contractType]: 1,\n      [EditionDropInitializer.contractType]: 2,\n      [EditionInitializer.contractType]: 1,\n      [TokenDropInitializer.contractType]: 2,\n      [TokenInitializer.contractType]: 1,\n      [VoteInitializer.contractType]: 1,\n      [SplitInitializer.contractType]: 1,\n      [MarketplaceInitializer.contractType]: 2,\n      [MarketplaceV3Initializer.contractType]: 1,\n      [PackInitializer.contractType]: 2\n    });\n    _defineProperty(this, \"deploy\", buildTransactionFunction(async (contractType, contractMetadata, eventEmitter, version, options, onExecute) => {\n      const contract = PREBUILT_CONTRACTS_MAP[contractType];\n      const metadata = await contract.schema.deploy.parseAsync(contractMetadata);\n\n      // TODO: is there any special pre-processing we need to do before uploading?\n      const contractURI = await this.storage.upload(metadata);\n      const implementationAddress = (await this.getImplementation(contract, version)) || undefined;\n      if (!implementationAddress || implementationAddress === constants.AddressZero) {\n        throw new Error(`No implementation found for ${contractType}`);\n      }\n      const ABI = await contract.getAbi(implementationAddress, this.getProvider(), this.storage);\n      const signer = this.getSigner();\n      invariant(signer, \"A signer is required to deploy contracts\");\n      const args = await getDeployArguments(contractType, metadata, contractURI, signer, this.storage);\n      const encodedFunc = Contract.getInterface(ABI).encodeFunctionData(\"initialize\", args);\n      const blockNumber = await this.getProvider().getBlockNumber();\n      const salt = options?.saltForProxyDeploy ? ethers.utils.id(options.saltForProxyDeploy) : ethers.utils.formatBytes32String(blockNumber.toString());\n      return Transaction.fromContractWrapper({\n        contractWrapper: this,\n        method: \"deployProxyByImplementation\",\n        args: [implementationAddress, encodedFunc, salt],\n        parse: receipt => {\n          if (onExecute) {\n            onExecute();\n          }\n          const events = this.parseLogs(\"ProxyDeployed\", receipt.logs);\n          if (events.length < 1) {\n            throw new Error(\"No ProxyDeployed event found\");\n          }\n          const contractAddress = events[0].args.proxy;\n          eventEmitter.emit(\"contractDeployed\", {\n            status: \"completed\",\n            contractAddress,\n            transactionHash: receipt.transactionHash\n          });\n          return contractAddress;\n        }\n      });\n    }));\n    // TODO once IContractFactory is implemented, this can be probably be moved to its own class\n    _defineProperty(this, \"deployProxyByImplementation\", buildTransactionFunction(async (implementationAddress, implementationAbi, initializerFunction, initializerArgs, eventEmitter, saltForProxyDeploy, onExecute) => {\n      const encodedFunc = Contract.getInterface(implementationAbi).encodeFunctionData(initializerFunction, initializerArgs);\n      const blockNumber = await this.getProvider().getBlockNumber();\n      const salt = saltForProxyDeploy ? ethers.utils.id(saltForProxyDeploy) : ethers.utils.formatBytes32String(blockNumber.toString());\n      return Transaction.fromContractWrapper({\n        contractWrapper: this,\n        method: \"deployProxyByImplementation\",\n        args: [implementationAddress, encodedFunc, salt],\n        parse: receipt => {\n          if (onExecute) {\n            onExecute();\n          }\n          const events = this.parseLogs(\"ProxyDeployed\", receipt.logs);\n          if (events.length < 1) {\n            throw new Error(\"No ProxyDeployed event found\");\n          }\n          const contractAddress = events[0].args.proxy;\n          eventEmitter.emit(\"contractDeployed\", {\n            status: \"completed\",\n            contractAddress,\n            transactionHash: receipt.transactionHash\n          });\n          return contractAddress;\n        }\n      });\n    }));\n    this.storage = storage;\n  }\n  /**\n   *\n   * @param contractType\n   * @param metadata\n   * @param contractURI\n   * @returns\n   * @internal\n   */\n  async getDeployArguments(contractType, metadata, contractURI) {\n    let trustedForwarders = contractType === PackInitializer.contractType ? [] : await this.getDefaultTrustedForwarders();\n    // override default forwarders if custom ones are passed in\n    if (metadata.trusted_forwarders && metadata.trusted_forwarders.length > 0) {\n      trustedForwarders = metadata.trusted_forwarders;\n    }\n    switch (contractType) {\n      case NFTDropInitializer.contractType:\n      case NFTCollectionInitializer.contractType:\n        const erc721metadata = await NFTDropInitializer.schema.deploy.parseAsync(metadata);\n        return [await this.getSignerAddress(), erc721metadata.name, erc721metadata.symbol, contractURI, trustedForwarders, erc721metadata.primary_sale_recipient, erc721metadata.fee_recipient, erc721metadata.seller_fee_basis_points, erc721metadata.platform_fee_basis_points, erc721metadata.platform_fee_recipient];\n      case SignatureDropInitializer.contractType:\n        const signatureDropmetadata = await SignatureDropInitializer.schema.deploy.parseAsync(metadata);\n        return [await this.getSignerAddress(), signatureDropmetadata.name, signatureDropmetadata.symbol, contractURI, trustedForwarders, signatureDropmetadata.primary_sale_recipient, signatureDropmetadata.fee_recipient, signatureDropmetadata.seller_fee_basis_points, signatureDropmetadata.platform_fee_basis_points, signatureDropmetadata.platform_fee_recipient];\n      case MultiwrapInitializer.contractType:\n        const multiwrapMetadata = await MultiwrapInitializer.schema.deploy.parseAsync(metadata);\n        return [await this.getSignerAddress(), multiwrapMetadata.name, multiwrapMetadata.symbol, contractURI, trustedForwarders, multiwrapMetadata.fee_recipient, multiwrapMetadata.seller_fee_basis_points];\n      case EditionDropInitializer.contractType:\n      case EditionInitializer.contractType:\n        const erc1155metadata = await EditionDropInitializer.schema.deploy.parseAsync(metadata);\n        return [await this.getSignerAddress(), erc1155metadata.name, erc1155metadata.symbol, contractURI, trustedForwarders, erc1155metadata.primary_sale_recipient, erc1155metadata.fee_recipient, erc1155metadata.seller_fee_basis_points, erc1155metadata.platform_fee_basis_points, erc1155metadata.platform_fee_recipient];\n      case TokenDropInitializer.contractType:\n      case TokenInitializer.contractType:\n        const erc20metadata = await TokenInitializer.schema.deploy.parseAsync(metadata);\n        return [await this.getSignerAddress(), erc20metadata.name, erc20metadata.symbol, contractURI, trustedForwarders, erc20metadata.primary_sale_recipient, erc20metadata.platform_fee_recipient, erc20metadata.platform_fee_basis_points];\n      case VoteInitializer.contractType:\n        const voteMetadata = await VoteInitializer.schema.deploy.parseAsync(metadata);\n        return [voteMetadata.name, contractURI, trustedForwarders, voteMetadata.voting_token_address, voteMetadata.voting_delay_in_blocks, voteMetadata.voting_period_in_blocks, BigNumber.from(voteMetadata.proposal_token_threshold), voteMetadata.voting_quorum_fraction];\n      case SplitInitializer.contractType:\n        const splitsMetadata = await SplitInitializer.schema.deploy.parseAsync(metadata);\n        return [await this.getSignerAddress(), contractURI, trustedForwarders, splitsMetadata.recipients.map(s => s.address), splitsMetadata.recipients.map(s => BigNumber.from(s.sharesBps))];\n      case MarketplaceInitializer.contractType:\n        const marketplaceMetadata = await MarketplaceInitializer.schema.deploy.parseAsync(metadata);\n        return [await this.getSignerAddress(), contractURI, trustedForwarders, marketplaceMetadata.platform_fee_recipient, marketplaceMetadata.platform_fee_basis_points];\n      case MarketplaceV3Initializer.contractType:\n        const marketplaceV3Metadata = await MarketplaceV3Initializer.schema.deploy.parseAsync(metadata);\n        return [await this.getSignerAddress(), contractURI, trustedForwarders, marketplaceV3Metadata.platform_fee_recipient, marketplaceV3Metadata.platform_fee_basis_points];\n      case PackInitializer.contractType:\n        const packsMetadata = await PackInitializer.schema.deploy.parseAsync(metadata);\n        return [await this.getSignerAddress(), packsMetadata.name, packsMetadata.symbol, contractURI, trustedForwarders, packsMetadata.fee_recipient, packsMetadata.seller_fee_basis_points];\n      default:\n        return [];\n    }\n  }\n  async getDefaultTrustedForwarders() {\n    const chainId = await this.getChainID();\n    return getDefaultTrustedForwarders(chainId);\n  }\n  async getImplementation(contract, version) {\n    const encodedType = ethers.utils.formatBytes32String(contract.name);\n    const chainId = await this.getChainID();\n    const approvedImplementation = getApprovedImplementation(chainId, contract.contractType);\n    // return approved implementation if it exists and we're not overriding the version\n    if (approvedImplementation && approvedImplementation.length > 0 && version === undefined) {\n      return approvedImplementation;\n    }\n    return this.readContract.getImplementation(encodedType, version !== undefined ? version : this.DEFAULT_VERSION_MAP[contract.contractType]);\n  }\n  async getLatestVersion(contractType) {\n    const name = getContractName(contractType);\n    if (!name) {\n      throw new Error(`Invalid contract type ${contractType}`);\n    }\n    const encodedType = ethers.utils.formatBytes32String(name);\n    return this.readContract.currentVersion(encodedType);\n  }\n}\n\n/**\n * @internal\n */\nclass ContractRegistry extends ContractWrapper {\n  constructor(registryAddress, network, options) {\n    super(network, registryAddress, TWRegistryABI$1, options);\n    _defineProperty(this, \"addContract\", buildTransactionFunction(async contractAddress => {\n      return await this.addContracts.prepare([contractAddress]);\n    }));\n    _defineProperty(this, \"addContracts\", buildTransactionFunction(async contractAddresses => {\n      const deployerAddress = await this.getSignerAddress();\n      const encoded = await Promise.all(contractAddresses.map(async address => this.readContract.interface.encodeFunctionData(\"add\", [deployerAddress, await resolveAddress(address)])));\n      return Transaction.fromContractWrapper({\n        contractWrapper: this,\n        method: \"multicall\",\n        args: [encoded]\n      });\n    }));\n    _defineProperty(this, \"removeContract\", buildTransactionFunction(async contractAddress => {\n      return await this.removeContracts.prepare([contractAddress]);\n    }));\n    _defineProperty(this, \"removeContracts\", buildTransactionFunction(async contractAddresses => {\n      const deployerAddress = await this.getSignerAddress();\n      const encoded = await Promise.all(contractAddresses.map(async address => this.readContract.interface.encodeFunctionData(\"remove\", [deployerAddress, await resolveAddress(address)])));\n      return Transaction.fromContractWrapper({\n        contractWrapper: this,\n        method: \"multicall\",\n        args: [encoded]\n      });\n    }));\n  }\n  async getContractAddresses(walletAddress) {\n    // TODO @fixme the filter here is necessary because for some reason getAll returns a 0x0 address for the first entry\n    return (await this.readContract.getAll(await resolveAddress(walletAddress))).filter(adr => utils.isAddress(adr) && adr.toLowerCase() !== constants.AddressZero);\n  }\n}\n\n/**\n * The main entry point for the thirdweb SDK\n * @public\n */\nclass ThirdwebSDK extends RPCConnectionHandler {\n  /**\n   * Get an instance of the thirdweb SDK based on an AbstractWallet\n   *\n   * @example\n   * ```javascript\n   * import { ThirdwebSDK } from \"@thirdweb-dev/sdk\"\n   *\n   * const wallet = new AbstractWalletImplementation();\n   * const sdk = await ThirdwebSDK.fromWallet(wallet, \"mainnet\");\n   * ```\n   *\n   * @param wallet - the implementation of the AbstractWallet class to use for signing\n   * @param network - the network (chain) to connect to (e.g. \"mainnet\", \"rinkeby\", \"polygon\", \"mumbai\"...) or a fully formed RPC url\n   * @param options - the SDK options to use\n   * @param storage - optional storage implementation to use\n   * @returns an instance of the SDK\n   *\n   * @beta\n   */\n  static async fromWallet(wallet, network) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    let storage = arguments.length > 3 ? arguments[3] : undefined;\n    const signer = await wallet.getSigner();\n    return ThirdwebSDK.fromSigner(signer, network, options, storage);\n  }\n\n  /**\n   * Get an instance of the thirdweb SDK based on an existing ethers signer\n   *\n   * @example\n   * ```javascript\n   * // get a signer from somewhere (createRandom is being used purely for example purposes)\n   * const signer = ethers.Wallet.createRandom();\n   *\n   * // get an instance of the SDK with the signer already setup\n   * const sdk = ThirdwebSDK.fromSigner(signer, \"mainnet\");\n   * ```\n   *\n   * @param signer - a ethers Signer to be used for transactions\n   * @param network - the network (chain) to connect to (e.g. \"mainnet\", \"rinkeby\", \"polygon\", \"mumbai\"...) or a fully formed RPC url\n   * @param options - the SDK options to use\n   * @param storage - optional storage implementation to use\n   * @returns an instance of the SDK\n   *\n   * @beta\n   */\n  static fromSigner(signer, network) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    let storage = arguments.length > 3 ? arguments[3] : undefined;\n    let signerWithProvider = signer;\n    if (network && !signer.provider) {\n      const provider = getChainProvider(network, options);\n      signerWithProvider = signer.connect(provider);\n    }\n    const sdk = new ThirdwebSDK(network || signerWithProvider, options, storage);\n    sdk.updateSignerOrProvider(signerWithProvider);\n    return sdk;\n  }\n\n  /**\n   * Get an instance of the thirdweb SDK based on a private key.\n   *\n   * @remarks\n   * This should only be used for backend services or scripts, with the private key stored in a secure way.\n   * **NEVER** expose your private key to the public in any way.\n   *\n   * @example\n   * ```javascript\n   * const sdk = ThirdwebSDK.fromPrivateKey(\"SecretPrivateKey\", \"mainnet\");\n   * ```\n   *\n   * @param privateKey - the private key - **DO NOT EXPOSE THIS TO THE PUBLIC**\n   * @param network - the network (chain) to connect to (e.g. \"mainnet\", \"rinkeby\", \"polygon\", \"mumbai\"...) or a fully formed RPC url\n   * @param options - the SDK options to use\n   * @param storage - optional storage implementation to use\n   * @returns an instance of the SDK\n   *\n   * @public\n   */\n  static fromPrivateKey(privateKey, network) {\n    let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    let storage = arguments.length > 3 ? arguments[3] : undefined;\n    const provider = getChainProvider(network, options);\n    const signer = new Wallet(privateKey, provider);\n    return new ThirdwebSDK(signer, options, storage);\n  }\n\n  /**\n   * @internal\n   * the cache of contracts that we have already seen\n   */\n\n  constructor(network) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let storage = arguments.length > 2 ? arguments[2] : undefined;\n    if (isChainConfig(network)) {\n      options = {\n        ...options,\n        // @ts-expect-error - we know that the network is assignable despite the readonly mismatch\n        supportedChains: [network, ...(options.supportedChains || [])]\n      };\n    }\n    super(network, options);\n    _defineProperty(this, \"contractCache\", new Map());\n    /**\n     * @internal\n     * should never be accessed directly, use {@link ThirdwebSDK.getPublisher} instead\n     */\n    _defineProperty(this, \"_publisher\", void 0);\n    /**\n     * Internal handler for uploading and downloading files\n     */\n    _defineProperty(this, \"storageHandler\", void 0);\n    /**\n     * New contract deployer\n     */\n    _defineProperty(this, \"deployer\", void 0);\n    /**\n     * Contract verifier\n     */\n    _defineProperty(this, \"verifier\", void 0);\n    /**\n     * The registry of deployed contracts\n     */\n    _defineProperty(this, \"multiChainRegistry\", void 0);\n    /**\n     * Interact with the connected wallet\n     */\n    _defineProperty(this, \"wallet\", void 0);\n    /**\n     * Upload and download files from IPFS or from your own storage service\n     */\n    _defineProperty(this, \"storage\", void 0);\n    setSupportedChains(options?.supportedChains);\n    const configuredStorage = createStorage(storage, options);\n    this.storage = configuredStorage;\n    this.storageHandler = configuredStorage;\n    this.wallet = new UserWallet(network, options);\n    this.deployer = new ContractDeployer(network, options, configuredStorage);\n    this.verifier = new ContractVerifier(network, options, configuredStorage);\n    this.multiChainRegistry = new MultichainRegistry(network, this.storageHandler, this.options);\n    this._publisher = new ContractPublisher(network, this.options, this.storageHandler);\n  }\n  get auth() {\n    throw new Error(`The sdk.auth namespace has been moved to the @thirdweb-dev/auth package and is no longer available after @thirdweb-dev/sdk >= 3.7.0.\n      Please visit https://portal.thirdweb.com/auth for instructions on how to switch to using the new auth package (@thirdweb-dev/auth@3.0.0).\n\n      If you still want to use the old @thirdweb-dev/auth@2.0.0 package, you can downgrade the SDK to version 3.6.0.`);\n  }\n\n  /**\n   * Get an instance of a NFT Drop contract\n   * @param contractAddress - the address of the deployed contract\n   * @deprecated\n   * This method is deprecated and will be removed in a future major version. You should use {@link getContract} instead.\n   * ```diff\n   * - const dropContract = await sdk.getDropContract(\"0x1234...\");\n   * + const dropContract = await sdk.getContract(\"0x1234...\", \"nft-drop\");\n   * ```\n   */\n  async getNFTDrop(contractAddress) {\n    return await this.getContract(contractAddress, \"nft-drop\");\n  }\n\n  /**\n   * Get an instance of a Signature Drop contract\n   * @param contractAddress - the address of the deployed contract\n   * @deprecated\n   * This method is deprecated and will be removed in a future major version. You should use {@link getContract} instead.\n   * ```diff\n   * - const signatureDrop = await sdk.getSignatureDrop(\"0x1234...\");\n   * + const signatureDrop = await sdk.getContract(\"0x1234...\", \"signature-drop\");\n   * ```\n   */\n  async getSignatureDrop(contractAddress) {\n    return await this.getContract(contractAddress, \"signature-drop\");\n  }\n\n  /**\n   * Get an instance of a NFT Collection Drop contract\n   * @param contractAddress - the address of the deployed contract\n   * @deprecated\n   * This method is deprecated and will be removed in a future major version. You should use {@link getContract} instead.\n   * ```diff\n   * - const signatureDrop = await sdk.getNFTCollection(\"0x1234...\");\n   * + const signatureDrop = await sdk.getContract(\"0x1234...\", \"nft-collection\");\n   * ```\n   */\n  async getNFTCollection(contractAddress) {\n    return await this.getContract(contractAddress, \"nft-collection\");\n  }\n\n  /**\n   * Get an instance of a Edition Drop contract\n   * @param contractAddress - the address of the deployed contract\n   * @deprecated\n   * This method is deprecated and will be removed in a future major version. You should use {@link getContract} instead.\n   * ```diff\n   * - const editionDrop = await sdk.getEditionDrop(\"0x1234...\");\n   * + const editionDrop = await sdk.getContract(\"0x1234...\", \"edition-drop\");\n   * ```\n   */\n  async getEditionDrop(contractAddress) {\n    return await this.getContract(contractAddress, \"edition-drop\");\n  }\n\n  /**\n   * Get an instance of a Edition contract\n   * @param contractAddress - the address of the deployed contract\n   * @deprecated\n   * This method is deprecated and will be removed in a future major version. You should use {@link getContract} instead.\n   * ```diff\n   * - const edition = await sdk.getEdition(\"0x1234...\");\n   * + const edition = await sdk.getContract(\"0x1234...\", \"edition\");\n   * ```\n   */\n  async getEdition(contractAddress) {\n    return await this.getContract(contractAddress, \"edition\");\n  }\n\n  /**\n   * Get an instance of a Token Drop contract\n   * @param contractAddress - the address of the deployed contract\n   * @deprecated\n   * This method is deprecated and will be removed in a future major version. You should use {@link getContract} instead.\n   * ```diff\n   * - const tokenDrop = await sdk.getTokenDrop(\"0x1234...\");\n   * + const tokenDrop = await sdk.getContract(\"0x1234...\", \"token-drop\");\n   * ```\n   */\n  async getTokenDrop(contractAddress) {\n    return await this.getContract(contractAddress, \"token-drop\");\n  }\n\n  /**\n   * Get an instance of a Token contract\n   * @param contractAddress - the address of the deployed contract\n   * @deprecated\n   * This method is deprecated and will be removed in a future major version. You should use {@link getContract} instead.\n   * ```diff\n   * - const token = await sdk.getToken(\"0x1234...\");\n   * + const token = await sdk.getContract(\"0x1234...\", \"token\");\n   * ```\n   */\n  async getToken(contractAddress) {\n    return await this.getContract(contractAddress, \"token\");\n  }\n\n  /**\n   * Get an instance of a Vote contract\n   * @param contractAddress - the address of the deployed contract\n   * @deprecated\n   * This method is deprecated and will be removed in a future major version. You should use {@link getContract} instead.\n   * ```diff\n   * - const vote = await sdk.getVote(\"0x1234...\");\n   * + const vote = await sdk.getContract(\"0x1234...\", \"vote\");\n   * ```\n   */\n  async getVote(contractAddress) {\n    return await this.getContract(contractAddress, \"vote\");\n  }\n\n  /**\n   * Get an instance of a Split contract\n   * @param contractAddress - the address of the deployed contract\n   * @deprecated\n   * This method is deprecated and will be removed in a future major version. You should use {@link getContract} instead.\n   * ```diff\n   * - const split = await sdk.getSplit(\"0x1234...\");\n   * + const split = await sdk.getContract(\"0x1234...\", \"split\");\n   * ```\n   */\n  async getSplit(contractAddress) {\n    return await this.getContract(contractAddress, \"split\");\n  }\n\n  /**\n   * Get an instance of a Marketplace contract\n   * @param contractAddress - the address of the deployed contract\n   * @deprecated\n   * This method is deprecated and will be removed in a future major version. You should use {@link getContract} instead.\n   * ```diff\n   * - const marketplace = await sdk.getMarketplace(\"0x1234...\");\n   * + const marketplace = await sdk.getContract(\"0x1234...\", \"marketplace\");\n   * ```\n   */\n  async getMarketplace(contractAddress) {\n    return await this.getContract(contractAddress, \"marketplace\");\n  }\n\n  /**\n   * Get an instance of a Marketplace contract\n   * @param contractAddress - the address of the deployed contract\n   * @deprecated\n   * This method is deprecated and will be removed in a future major version. You should use {@link getContract} instead.\n   * ```diff\n   * - const marketplace = await sdk.getMarketplaceV3(\"0x1234...\");\n   * + const marketplace = await sdk.getContract(\"0x1234...\", \"marketplace-v3\");\n   * ```\n   */\n  async getMarketplaceV3(contractAddress) {\n    return await this.getContract(contractAddress, \"marketplace-v3\");\n  }\n\n  /**\n   * Get an instance of a Pack contract\n   * @param contractAddress - the address of the deployed contract\n   * @deprecated\n   * This method is deprecated and will be removed in a future major version. You should use {@link getContract} instead.\n   * ```diff\n   * - const pack = await sdk.getPack(\"0x1234...\");\n   * + const pack = await sdk.getContract(\"0x1234...\", \"pack\");\n   * ```\n   */\n  async getPack(contractAddress) {\n    return await this.getContract(contractAddress, \"pack\");\n  }\n\n  /**\n   * Get an instance of a Pack contract\n   * @param contractAddress - the address of the deployed contract\n   * @deprecated\n   * This method is deprecated and will be removed in a future major version. You should use {@link getContract} instead.\n   * ```diff\n   * - const multiWrap = await sdk.getMultiwrap(\"0x1234...\");\n   * + const multiWrap = await sdk.getContract(\"0x1234...\", \"multiwrap\");\n   * ```\n   */\n  async getMultiwrap(contractAddress) {\n    return await this.getContract(contractAddress, \"multiwrap\");\n  }\n\n  /**\n   * Get an instance of a Custom ThirdwebContract\n   * @param address - the address of the deployed contract\n   * @returns the contract\n   * @public\n   * @example\n   * ```javascript\n   * const contract = await sdk.getContract(\"{{contract_address}}\");\n   * ```\n   */\n\n  async getContract(address, contractTypeOrABI) {\n    const resolvedAddress = await resolveAddress(address);\n\n    // if we have a contract in the cache we will return it\n    // we will do this **without** checking any contract type things for simplicity, this may have to change in the future?\n    if (this.contractCache.has(resolvedAddress)) {\n      // we know this will be there since we check the has above\n      return this.contractCache.get(resolvedAddress);\n    }\n    if (resolvedAddress in GENERATED_ABI) {\n      return await this.getContractFromAbi(resolvedAddress, GENERATED_ABI[resolvedAddress]);\n    }\n    let newContract;\n\n    // if we don't have a contractType or ABI then we will have to resolve it regardless\n    // we also handle it being \"custom\" just in case...\n    if (!contractTypeOrABI || contractTypeOrABI === \"custom\") {\n      try {\n        const metadata = await this.getPublisher().fetchCompilerMetadataFromAddress(resolvedAddress);\n        newContract = await this.getContractFromAbi(resolvedAddress, metadata.abi);\n      } catch (e) {\n        // try resolving the contract type (legacy contracts)\n        const resolvedContractType = await this.resolveContractType(address);\n        if (resolvedContractType && resolvedContractType !== \"custom\") {\n          // otherwise if it's a prebuilt contract we can just use the contract type\n          const contractAbi = await PREBUILT_CONTRACTS_MAP[resolvedContractType].getAbi(address, this.getProvider(), this.storage);\n          newContract = await this.getContractFromAbi(address, contractAbi);\n        } else {\n          // we cant fetch the ABI, and we don't know the contract type, throw an error\n          const chainId = (await this.getProvider().getNetwork()).chainId;\n          throw new Error(`No ABI found for this contract. Try importing it by visiting: https://thirdweb.com/${chainId}/${resolvedAddress}`);\n        }\n      }\n    }\n    // if it's a builtin contract type we can just use the contract type to initialize the contract instance\n    else if (typeof contractTypeOrABI === \"string\" && contractTypeOrABI in PREBUILT_CONTRACTS_MAP) {\n      newContract = await PREBUILT_CONTRACTS_MAP[contractTypeOrABI].initialize(this.getSignerOrProvider(), resolvedAddress, this.storage, this.options);\n    }\n    // otherwise it has to be an ABI\n    else {\n      newContract = await this.getContractFromAbi(resolvedAddress, contractTypeOrABI);\n    }\n\n    // set whatever we have on the cache\n    this.contractCache.set(resolvedAddress, newContract);\n    // return it\n    return newContract;\n  }\n\n  /**\n   * @internal\n   * @deprecated use {@link getContract} directly instead\n   */\n  async getBuiltInContract(address, contractType) {\n    return await this.getContract(address, contractType);\n  }\n\n  /**\n   * @param contractAddress - the address of the contract to attempt to resolve the contract type for\n   * @returns the {@link ContractType} for the given contract address\n   *\n   */\n  async resolveContractType(contractAddress) {\n    try {\n      const contract = new Contract(await resolveAddress(contractAddress), IThirdwebContractABI,\n      // !provider only! - signer can break things here!\n      this.getProvider());\n      const remoteContractType = utils.toUtf8String(await contract.contractType())\n      // eslint-disable-next-line no-control-regex\n      .replace(/\\x00/g, \"\");\n      return getContractTypeForRemoteName(remoteContractType);\n    } catch (err) {\n      return \"custom\";\n    }\n  }\n\n  /**\n   * Return all the contracts deployed by the specified address\n   * @param walletAddress - the deployed address\n   * @example\n   * ```javascript\n   * const contracts = sdk.getContractList(\"{{wallet_address}}\");\n   * ```\n   */\n  async getContractList(walletAddress) {\n    // TODO - this only reads from the current registry chain, not the multichain registry\n    const addresses = (await (await this.deployer.getRegistry())?.getContractAddresses(await resolveAddress(walletAddress))) || [];\n    const chainId = (await this.getProvider().getNetwork()).chainId;\n    return await Promise.all(addresses.map(async address => {\n      return {\n        address: address,\n        chainId,\n        contractType: () => this.resolveContractType(address),\n        metadata: async () => (await this.getContract(address)).metadata.get(),\n        extensions: async () => getAllDetectedFeatureNames((await this.getContract(address)).abi)\n      };\n    }));\n  }\n  async getMultichainContractList(walletAddress) {\n    let chains = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultChains;\n    const contracts = await this.multiChainRegistry.getContractAddresses(walletAddress);\n    const chainMap = chains.reduce((acc, chain) => {\n      acc[chain.chainId] = chain;\n      return acc;\n    }, {});\n    const sdkMap = {};\n    return contracts.map(_ref => {\n      let {\n        address,\n        chainId\n      } = _ref;\n      if (!chainMap[chainId]) {\n        // if we don't have the chain in our list of supported chains then we can't resolve the contract type regardless, don't even try to set up the SDK\n        return {\n          address,\n          chainId,\n          contractType: async () => \"custom\",\n          metadata: async () => ({}),\n          extensions: async () => []\n        };\n      }\n      try {\n        let chainSDK = sdkMap[chainId];\n        if (!chainSDK) {\n          chainSDK = new ThirdwebSDK(chainId, {\n            ...this.options,\n            // need to disable readonly settings for this to work\n            readonlySettings: undefined,\n            // @ts-expect-error - zod doesn't like this\n            supportedChains: chains\n          });\n          sdkMap[chainId] = chainSDK;\n        }\n        return {\n          address,\n          chainId,\n          contractType: () => chainSDK.resolveContractType(address),\n          metadata: async () => (await chainSDK.getContract(address)).metadata.get(),\n          extensions: async () => getAllDetectedFeatureNames((await chainSDK.getContract(address)).abi)\n        };\n      } catch (e) {\n        return {\n          address,\n          chainId,\n          contractType: async () => \"custom\",\n          metadata: async () => ({}),\n          extensions: async () => []\n        };\n      }\n    });\n  }\n\n  /**\n   * Update the active signer or provider for all contracts\n   * @param network - the new signer or provider\n   */\n  updateSignerOrProvider(network) {\n    super.updateSignerOrProvider(network);\n    this.updateContractSignerOrProvider();\n  }\n  updateContractSignerOrProvider() {\n    this.wallet.connect(this.getSignerOrProvider());\n    this.deployer.updateSignerOrProvider(this.getSignerOrProvider());\n    this._publisher.updateSignerOrProvider(this.getSignerOrProvider());\n    this.multiChainRegistry.updateSigner(this.getSignerOrProvider());\n    this.verifier.updateSignerOrProvider(this.getSignerOrProvider());\n    for (const [, contract] of this.contractCache) {\n      contract.onNetworkUpdated(this.getSignerOrProvider());\n    }\n  }\n\n  /**\n   * Get an instance of a Custom contract from a json ABI\n   * @param address - the address of the deployed contract\n   * @param abi - the JSON abi\n   * @returns the contract\n   * @beta\n   * @example\n   * ```javascript\n   * // Import your ABI from a JSON file\n   * import myABI from \"./path/to/myABI.json\";\n   *\n   * const contract = sdk.getContractFromAbi(\n   *   \"{{contract_address}}\",\n   *   // Pass in the \"abi\" field from the JSON file\n   *   myABI.abi\n   * );\n   * ```\n   */\n  async getContractFromAbi(address, abi) {\n    const resolvedAddress = await resolveAddress(address);\n    if (this.contractCache.has(resolvedAddress)) {\n      return this.contractCache.get(resolvedAddress);\n    }\n    const [, provider] = getSignerAndProvider(this.getSignerOrProvider(), this.options);\n    const parsedABI = typeof abi === \"string\" ? JSON.parse(abi) : abi;\n    // TODO we still might want to lazy-fy this\n    const contract = new SmartContract(this.getSignerOrProvider(), resolvedAddress, await getCompositePluginABI(resolvedAddress, AbiSchema.parse(parsedABI), provider, this.options, this.storage), this.storageHandler, this.options, (await provider.getNetwork()).chainId);\n    this.contractCache.set(resolvedAddress, contract);\n    return contract;\n  }\n\n  /**\n   * Get the native balance of a given address (wallet or contract)\n   * @example\n   * ```javascript\n   * const balance = await sdk.getBalance(\"0x...\");\n   * console.log(balance.displayValue);\n   * ```\n   * @param address - the address to check the balance for\n   */\n  async getBalance(address) {\n    return fetchCurrencyValue(this.getProvider(), NATIVE_TOKEN_ADDRESS, await this.getProvider().getBalance(await resolveAddress(address)));\n  }\n\n  /**\n   * @internal\n   */\n  getPublisher() {\n    return this._publisher;\n  }\n}\nconst THIRDWEB_DEPLOYER = \"0xdd99b75f095d0c4d5112aCe938e4e6ed962fb024\";\n\n/**\n * Handles deploying new contracts\n * @public\n */\nclass ContractDeployer extends RPCConnectionHandler {\n  /**\n   * @internal\n   * should never be accessed directly, use {@link ContractDeployer.getFactory} instead\n   */\n\n  /**\n   * @internal\n   * should never be accessed directly, use {@link ContractDeployer.getRegistry} instead\n   */\n\n  constructor(network, _options, storage) {\n    var _this;\n    super(network, _options);\n    _this = this;\n    _defineProperty(this, \"_factory\", void 0);\n    _defineProperty(this, \"_registry\", void 0);\n    _defineProperty(this, \"storage\", void 0);\n    _defineProperty(this, \"events\", void 0);\n    _defineProperty(this, \"transactionListener\", event => {\n      if (event.status === \"submitted\") {\n        this.events.emit(\"contractDeployed\", {\n          status: \"submitted\",\n          transactionHash: event.transactionHash\n        });\n      }\n    });\n    /**\n     * Deploys an NFT Collection contract\n     *\n     * @remarks Deploys an NFT Collection contract and returns the address of the deployed contract\n     *\n     * @example\n     * ```javascript\n     * const contractAddress = await sdk.deployer.deployNFTCollection({\n     *   name: \"My Collection\",\n     *   primary_sale_recipient: \"your-address\",\n     * });\n     * ```\n     * @param metadata - the contract metadata\n     * @returns the address of the deployed contract\n     */\n    _defineProperty(this, \"deployNFTCollection\", buildDeployTransactionFunction(async (metadata, options) => {\n      return await this.deployBuiltInContract.prepare(NFTCollectionInitializer.contractType, metadata, \"latest\", options);\n    }));\n    /**\n     * Deploys a new NFTDrop contract\n     *\n     * @remarks Deploys an NFT Drop contract and returns the address of the deployed contract\n     *\n     * @example\n     * ```javascript\n     * const contractAddress = await sdk.deployer.deployNFTDrop({\n     *   name: \"My Drop\",\n     *   primary_sale_recipient: \"your-address\",\n     * });\n     * ```\n     * @param metadata - the contract metadata\n     * @returns the address of the deployed contract\n     */\n    _defineProperty(this, \"deployNFTDrop\", buildDeployTransactionFunction(async (metadata, options) => {\n      return await this.deployBuiltInContract.prepare(NFTDropInitializer.contractType, metadata, \"latest\", options);\n    }));\n    /**\n     * Deploys a new SignatureDrop contract\n     *\n     * @remarks Deploys a SignatureDrop contract and returns the address of the deployed contract\n     *\n     * @example\n     * ```javascript\n     * const contractAddress = await sdk.deployer.deploySignatureDrop({\n     *   name: \"My Signature Drop\",\n     *   primary_sale_recipient: \"your-address\",\n     * });\n     * ```\n     * @param metadata - the contract metadata\n     * @returns the address of the deployed contract\n     */\n    _defineProperty(this, \"deploySignatureDrop\", buildDeployTransactionFunction(async (metadata, options) => {\n      return await this.deployBuiltInContract.prepare(SignatureDropInitializer.contractType, metadata, \"latest\", options);\n    }));\n    /**\n     * Deploys a new Multiwrap contract\n     *\n     * @remarks Deploys a Multiwrap contract and returns the address of the deployed contract\n     *\n     * @example\n     * ```javascript\n     * const contractAddress = await sdk.deployer.deployMultiwrap({\n     *   name: \"My Multiwrap\",\n     * });\n     * ```\n     * @param metadata - the contract metadata\n     * @returns the address of the deployed contract\n     * @beta\n     */\n    _defineProperty(this, \"deployMultiwrap\", buildDeployTransactionFunction(async (metadata, options) => {\n      return await this.deployBuiltInContract.prepare(MultiwrapInitializer.contractType, metadata, \"latest\", options);\n    }));\n    /**\n     * Deploys a new Edition contract\n     *\n     * @remarks Deploys an Edition contract and returns the address of the deployed contract\n     *\n     * @example\n     * ```javascript\n     * const contractAddress = await sdk.deployer.deployEdition({\n     *   name: \"My Edition\",\n     *   primary_sale_recipient: \"your-address\",\n     * });\n     * ```\n     * @param metadata - the contract metadata\n     * @returns the address of the deployed contract\n     */\n    _defineProperty(this, \"deployEdition\", buildDeployTransactionFunction(async (metadata, options) => {\n      return await this.deployBuiltInContract.prepare(EditionInitializer.contractType, metadata, \"latest\", options);\n    }));\n    /**\n     * Deploys a new EditionDrop contract\n     *\n     * @remarks Deploys an Edition Drop contract and returns the address of the deployed contract\n     *\n     * @example\n     * ```javascript\n     * const contractAddress = await sdk.deployer.deployEditionDrop({\n     *   name: \"My Edition Drop\",\n     *   primary_sale_recipient: \"your-address\",\n     * });\n     * ```\n     * @param metadata - the contract metadata\n     * @returns the address of the deployed contract\n     */\n    _defineProperty(this, \"deployEditionDrop\", buildDeployTransactionFunction(async (metadata, options) => {\n      return await this.deployBuiltInContract.prepare(EditionDropInitializer.contractType, metadata, \"latest\", options);\n    }));\n    /**\n     * Deploys a new Token contract\n     *\n     * @remarks Deploys a Token contract and returns the address of the deployed contract\n     *\n     * @example\n     * ```javascript\n     * const contractAddress = await sdk.deployer.deployToken({\n     *   name: \"My Token\",\n     *   primary_sale_recipient: \"your-address\",\n     * });\n     * ```\n     * @param metadata - the contract metadata\n     * @returns the address of the deployed contract\n     */\n    _defineProperty(this, \"deployToken\", buildDeployTransactionFunction(async (metadata, options) => {\n      return await this.deployBuiltInContract.prepare(TokenInitializer.contractType, metadata, \"latest\", options);\n    }));\n    /**\n     * Deploys a new Token Drop contract\n     *\n     * @remarks Deploys a Token Drop contract and returns the address of the deployed contract\n     *\n     * @example\n     * ```javascript\n     * const contractAddress = await sdk.deployer.deployTokenDrop({\n     *   name: \"My Token Drop\",\n     *   primary_sale_recipient: \"your-address\",\n     * });\n     * ```\n     * @param metadata - the contract metadata\n     * @returns the address of the deployed contract\n     */\n    _defineProperty(this, \"deployTokenDrop\", buildDeployTransactionFunction(async (metadata, options) => {\n      return await this.deployBuiltInContract.prepare(TokenDropInitializer.contractType, metadata, \"latest\", options);\n    }));\n    /**\n     * Deploys a new Marketplace contract\n     *\n     * @remarks Deploys a Marketplace contract and returns the address of the deployed contract\n     *\n     * @example\n     * ```javascript\n     * const contractAddress = await sdk.deployer.deployMarketplace({\n     *   name: \"My Marketplace\",\n     *   primary_sale_recipient: \"your-address\",\n     * });\n     * ```\n     * @param metadata - the contract metadata\n     * @returns the address of the deployed contract\n     */\n    _defineProperty(this, \"deployMarketplace\", buildDeployTransactionFunction(async (metadata, options) => {\n      return await this.deployBuiltInContract.prepare(MarketplaceInitializer.contractType, metadata, \"latest\", options);\n    }));\n    /**\n     * Deploys a new Marketplace-V3 contract\n     *\n     * @remarks Deploys a Marketplace-V3 contract and returns the address of the deployed contract\n     *\n     * @example\n     * ```javascript\n     * const contractAddress = await sdk.deployer.deployMarketplaceV3({\n     *   name: \"My Marketplace\",\n     *   primary_sale_recipient: \"your-address\",\n     * });\n     * ```\n     * @param metadata - the contract metadata\n     * @returns the address of the deployed contract\n     */\n    _defineProperty(this, \"deployMarketplaceV3\", buildDeployTransactionFunction(async (metadata, options) => {\n      return await this.deployBuiltInContract.prepare(MarketplaceV3Initializer.contractType, metadata, \"latest\", options);\n    }));\n    /**\n     * Deploys a new Pack contract\n     *\n     * @remarks Deploys a Pack contract and returns the address of the deployed contract\n     *\n     * @example\n     * ```javascript\n     * const contractAddress = await sdk.deployer.deployPack({\n     *   name: \"My Pack\",\n     *   primary_sale_recipient: \"your-address\",\n     * });\n     * ```\n     * @param metadata - the contract metadata\n     * @returns the address of the deployed contract\n     */\n    _defineProperty(this, \"deployPack\", buildDeployTransactionFunction(async (metadata, options) => {\n      return await this.deployBuiltInContract.prepare(PackInitializer.contractType, metadata, \"latest\", options);\n    }));\n    /**\n     * Deploys a new Split contract\n     *\n     * @remarks Deploys a Split contract and returns the address of the deployed contract\n     *\n     * @example\n     * ```javascript\n     * const contractAddress = await sdk.deployer.deploySplit({\n     *   name: \"My Split\",\n     *   primary_sale_recipient: \"your-address\",\n     *   recipients: [\n     *    {\n     *      address: \"your-address\",\n     *      sharesBps: 80 * 100, // 80%\n     *    },\n     *    {\n     *      address: \"another-address\",\n     *      sharesBps: 20 * 100, // 20%\n     *    },\n     *   ],\n     * });\n     * ```\n     * @param metadata - the contract metadata\n     * @returns the address of the deployed contract\n     */\n    _defineProperty(this, \"deploySplit\", buildDeployTransactionFunction(async (metadata, options) => {\n      return await this.deployBuiltInContract.prepare(SplitInitializer.contractType, metadata, \"latest\", options);\n    }));\n    /**\n     * Deploys a new Vote contract\n     *\n     * @remarks Deploys an Vote contract and returns the address of the deployed contract\n     *\n     * @example\n     * ```javascript\n     * const contractAddress = await sdk.deployer.deployVote({\n     *   name: \"My Vote\",\n     *   primary_sale_recipient: \"your-address\",\n     *   voting_token_address: \"your-token-contract-address\",\n     * });\n     * ```\n     * @param metadata - the contract metadata\n     * @returns the address of the deployed contract\n     */\n    _defineProperty(this, \"deployVote\", buildDeployTransactionFunction(async (metadata, options) => {\n      return await this.deployBuiltInContract.prepare(VoteInitializer.contractType, metadata, \"latest\", options);\n    }));\n    /**\n     * Deploys a new contract\n     *\n     * @internal\n     * @param contractType - the type of contract to deploy\n     * @param contractMetadata - the metadata to deploy the contract with\n     * @param version\n     * @returns a promise of the address of the newly deployed contract\n     */\n    _defineProperty(this, \"deployBuiltInContract\", buildDeployTransactionFunction(async function (contractType, contractMetadata) {\n      let version = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"latest\";\n      let options = arguments.length > 3 ? arguments[3] : undefined;\n      const signer = _this.getSigner();\n      invariant(signer, \"A signer is required to deploy contracts\");\n      const parsedMetadata = {\n        app_uri: PREBUILT_CONTRACTS_APPURI_MAP[contractType],\n        ...(await PREBUILT_CONTRACTS_MAP[contractType].schema.deploy.parseAsync(contractMetadata))\n      };\n      if (_this.hasLocalFactory()) {\n        // old behavior for unit tests, deploy from local factory\n        // parse version into the first number of the version string (or undefined if unparseable)\n        let parsedVersion = undefined;\n        try {\n          parsedVersion = parseInt(version);\n          if (isNaN(parsedVersion)) {\n            parsedVersion = undefined;\n          }\n        } catch (e) {\n          parsedVersion = undefined;\n        }\n        const factory = await _this.getFactory();\n        if (!factory) {\n          throw new Error(\"Factory not found\");\n        }\n        factory.on(EventType.Transaction, _this.transactionListener);\n        return factory.deploy.prepare(contractType, parsedMetadata, _this.events, parsedVersion, options, () => {\n          factory.off(EventType.Transaction, _this.transactionListener);\n        });\n      }\n\n      // For all other chains, fetch from published contracts\n      // resolve contract name from type\n      const contractName = getContractName(contractType);\n      invariant(contractName, \"Contract name not found\");\n      // first upload the contract metadata\n      const contractURI = await _this.storage.upload(parsedMetadata);\n      // then get the deploy arguments\n      const constructorParams = await getDeployArguments(contractType, parsedMetadata, contractURI, signer, _this.storage);\n\n      // fetch the publish URI from the ContractPublisher contract\n      const publishedContract = await _this.fetchPublishedContractFromPolygon(THIRDWEB_DEPLOYER, contractName, version);\n      return _this.deployContractFromUri.prepare(publishedContract.metadataUri, constructorParams, options);\n    }));\n    /**\n     * Deploy any published contract by its name\n     * @param publisherAddress the address of the publisher\n     * @param contractName the name of the contract to deploy\n     * @param constructorParams the constructor params to pass to the contract\n     */\n    _defineProperty(this, \"deployReleasedContract\", buildDeployTransactionFunction(async function (publisherAddress, contractName, constructorParams) {\n      let version = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : \"latest\";\n      let options = arguments.length > 4 ? arguments[4] : undefined;\n      const publishedContract = await _this.fetchPublishedContractFromPolygon(publisherAddress, contractName, version);\n      return await _this.deployContractFromUri.prepare(publishedContract.metadataUri, constructorParams, options);\n    }));\n    /**\n     * Deploy a proxy contract of a given implementation via the given factory\n     * @param factoryAddress\n     * @param implementationAddress\n     * @param implementationAbi\n     * @param initializerFunction\n     * @param initializerArgs\n     */\n    _defineProperty(this, \"deployViaFactory\", buildTransactionFunction(async (factoryAddress, implementationAddress, implementationAbi, initializerFunction, initializerArgs, saltForProxyDeploy) => {\n      const resolvedFactoryAddress = await resolveAddress(factoryAddress);\n      const resolvedImplementationAddress = await resolveAddress(implementationAddress);\n      const signer = this.getSigner();\n      invariant(signer, \"signer is required\");\n      // TODO only require factory interface here - IProxyFactory\n      const proxyFactory = new ContractFactory(resolvedFactoryAddress, this.getSignerOrProvider(), this.storage, this.options);\n      proxyFactory.on(EventType.Transaction, this.transactionListener);\n      return await proxyFactory.deployProxyByImplementation.prepare(resolvedImplementationAddress, implementationAbi, initializerFunction, initializerArgs, this.events, saltForProxyDeploy, () => {\n        proxyFactory.off(EventType.Transaction, this.transactionListener);\n      });\n    }));\n    /**\n     * Deploy a proxy contract of a given implementation directly\n     * @param implementationAddress\n     * @param implementationAbi\n     * @param initializerFunction\n     * @param initializerArgs\n     */\n    _defineProperty(this, \"deployProxy\", buildDeployTransactionFunction(async (implementationAddress, implementationAbi, initializerFunction, initializerArgs) => {\n      const resolvedAddress = await resolveAddress(implementationAddress);\n      const encodedInitializer = Contract.getInterface(implementationAbi).encodeFunctionData(initializerFunction, initializerArgs);\n      const {\n        TWProxy__factory\n      } = await import('@thirdweb-dev/contracts-js/factories/TWProxy__factory');\n      return this.deployContractWithAbi.prepare(TWProxy__factory.abi, TWProxy__factory.bytecode, [resolvedAddress, encodedInitializer]);\n    }));\n    /**\n     * Deploy a proxy contract of a given implementation via thirdweb's Clone factory\n     * @param publishMetadataUri\n     * @param constructorParamValues\n     * @param deployMetadata\n     * @param signer\n     * @param options\n     */\n    _defineProperty(this, \"deployViaAutoFactory\", buildDeployTransactionFunction(async (publishMetadataUri, deployMetadata, signer, initializerFunction, paramValues, options) => {\n      // any evm deployment flow\n\n      // 1. Deploy CREATE2 factory (if not already exists)\n      const create2Factory = await deployCreate2Factory(signer, options);\n\n      // 2. get deployment info for any evm\n      const deploymentInfo = await getDeploymentInfo(publishMetadataUri, this.storage, this.getProvider(), create2Factory);\n      const implementationAddress = deploymentInfo.find(i => i.type === \"implementation\")?.transaction.predictedAddress;\n\n      // 3. deploy infra + plugins + implementation using a throwaway Deployer contract\n\n      // filter out already deployed contracts (data is empty)\n      const transactionsToSend = deploymentInfo.filter(i => i.transaction.data && i.transaction.data.length > 0);\n      const transactionsforDirectDeploy = transactionsToSend.filter(i => {\n        return i.type !== \"infra\";\n      }).map(i => i.transaction);\n      const transactionsForThrowawayDeployer = transactionsToSend.filter(i => {\n        return i.type === \"infra\";\n      }).map(i => i.transaction);\n\n      // deploy via throwaway deployer, multiple infra contracts in one transaction\n      await deployWithThrowawayDeployer(signer, transactionsForThrowawayDeployer, options);\n\n      // send each transaction directly to Create2 factory\n      await Promise.all(transactionsforDirectDeploy.map(tx => {\n        return deployContractDeterministic(signer, tx, options);\n      }));\n      const resolvedImplementationAddress = await resolveAddress(implementationAddress);\n\n      // 4. deploy proxy with TWStatelessFactory (Clone factory) and return address\n      const cloneFactory = await computeCloneFactoryAddress(this.getProvider(), this.storage, create2Factory);\n      options?.notifier?.(\"deploying\", \"proxy\");\n      const proxyDeployTransaction = await this.deployViaFactory.prepare(cloneFactory, resolvedImplementationAddress, deployMetadata.compilerMetadata.abi, initializerFunction, paramValues, options?.saltForProxyDeploy);\n      options?.notifier?.(\"deployed\", \"proxy\");\n      return proxyDeployTransaction;\n    }));\n    /**\n     * Deploy a proxy contract of a given implementation via a custom factory\n     * @param constructorParamValues\n     * @param deployMetadata\n     * @param signer\n     * @param chainId\n     */\n    _defineProperty(this, \"deployViaCustomFactory\", buildDeployTransactionFunction(async (constructorParamValues, deployMetadata, signer, chainId) => {\n      let customFactoryAddress = deployMetadata.extendedMetadata?.factoryDeploymentData?.customFactoryInput?.customFactoryAddresses[chainId];\n      const resolvedCustomFactoryAddress = await resolveAddress(customFactoryAddress);\n      invariant(resolvedCustomFactoryAddress, `customFactoryAddress not found for chainId '${chainId}'`);\n      invariant(deployMetadata.extendedMetadata?.factoryDeploymentData?.customFactoryInput?.factoryFunction, `customFactoryFunction not set'`);\n      const customFactoryMetadata = await fetchContractMetadataFromAddress(resolvedCustomFactoryAddress, this.getProvider(), this.storage);\n      const factoryFunctionParamTypes = extractFunctionParamsFromAbi(customFactoryMetadata.abi, deployMetadata.extendedMetadata.factoryDeploymentData.customFactoryInput.factoryFunction).map(p => p.type);\n      const factoryFunctionparamValues = convertParamValues(factoryFunctionParamTypes, constructorParamValues);\n      let deployedImplementationAddress;\n      const deployTransaction = await Transaction.fromContractInfo({\n        contractAddress: resolvedCustomFactoryAddress,\n        contractAbi: customFactoryMetadata.abi,\n        provider: this.getProvider(),\n        signer,\n        method: deployMetadata.extendedMetadata.factoryDeploymentData.customFactoryInput.factoryFunction,\n        args: factoryFunctionparamValues,\n        parse: () => {\n          return deployedImplementationAddress;\n        }\n      });\n      deployedImplementationAddress = await deployTransaction.simulate();\n      return deployTransaction;\n    }));\n    /**\n     * @internal\n     * @param publishMetadataUri\n     * @param constructorParamValues\n     * @param options\n     */\n    _defineProperty(this, \"deployContractFromUri\", buildDeployTransactionFunction(async (publishMetadataUri, constructorParamValues, options) => {\n      const signer = this.getSigner();\n      invariant(signer, \"A signer is required\");\n      const {\n        compilerMetadata,\n        extendedMetadata\n      } = await fetchAndCacheDeployMetadata(publishMetadataUri, this.storage);\n      const forceDirectDeploy = options?.forceDirectDeploy || false;\n      const chainId = (await this.getProvider().getNetwork()).chainId;\n      const isNetworkEnabled = extendedMetadata?.networksForDeployment?.networksEnabled.includes(chainId) || extendedMetadata?.networksForDeployment?.allNetworks;\n      if (extendedMetadata?.networksForDeployment && !isNetworkEnabled) {\n        throw new Error(`Deployments disabled on this network, with chainId: ${chainId}`);\n      }\n      if (extendedMetadata && extendedMetadata.factoryDeploymentData && (extendedMetadata.isDeployableViaProxy || extendedMetadata.isDeployableViaFactory || extendedMetadata.deployType && extendedMetadata.deployType !== \"standard\") && !forceDirectDeploy) {\n        if (extendedMetadata.deployType === \"customFactory\") {\n          return await this.deployViaCustomFactory.prepare(constructorParamValues, {\n            compilerMetadata,\n            extendedMetadata\n          }, signer, chainId);\n        } else {\n          invariant(extendedMetadata.factoryDeploymentData.implementationInitializerFunction, `implementationInitializerFunction not set'`);\n          const initializerParamTypes = extractFunctionParamsFromAbi(compilerMetadata.abi, extendedMetadata.factoryDeploymentData.implementationInitializerFunction).map(p => p.type);\n          const paramValues = convertParamValues(initializerParamTypes, constructorParamValues);\n          let implementationAddress = extendedMetadata.factoryDeploymentData.implementationAddresses[chainId];\n          if (!implementationAddress || extendedMetadata.deployType === \"autoFactory\") {\n            return await this.deployViaAutoFactory.prepare(publishMetadataUri, {\n              compilerMetadata,\n              extendedMetadata\n            }, signer, extendedMetadata.factoryDeploymentData.implementationInitializerFunction, paramValues, options);\n          }\n          const resolvedImplementationAddress = await resolveAddress(implementationAddress);\n          invariant(resolvedImplementationAddress, `implementationAddress not found for chainId '${chainId}'`);\n          if (extendedMetadata.isDeployableViaFactory) {\n            // deploy via a factory (prioritise factory)\n            invariant(extendedMetadata.factoryDeploymentData.factoryAddresses, \"isDeployableViaFactory is true so factoryAddresses is required\");\n            const factoryAddress = extendedMetadata.factoryDeploymentData.factoryAddresses[chainId];\n            invariant(factoryAddress, `isDeployableViaFactory is true and factoryAddress not found for chainId '${chainId}'`);\n            const resolvedFactoryAddress = await resolveAddress(factoryAddress);\n            return await this.deployViaFactory.prepare(resolvedFactoryAddress, resolvedImplementationAddress, compilerMetadata.abi, extendedMetadata.factoryDeploymentData.implementationInitializerFunction, paramValues, options?.saltForProxyDeploy);\n          } else if (extendedMetadata.isDeployableViaProxy) {\n            // deploy a proxy directly\n            return await this.deployProxy.prepare(resolvedImplementationAddress, compilerMetadata.abi, extendedMetadata.factoryDeploymentData.implementationInitializerFunction, paramValues);\n          }\n        }\n      }\n      const bytecode = compilerMetadata.bytecode.startsWith(\"0x\") ? compilerMetadata.bytecode : `0x${compilerMetadata.bytecode}`;\n      if (!ethers.utils.isHexString(bytecode)) {\n        throw new Error(`Contract bytecode is invalid.\\n\\n${bytecode}`);\n      }\n      const constructorParamTypes = extractConstructorParamsFromAbi(compilerMetadata.abi).map(p => p.type);\n      const paramValues = convertParamValues(constructorParamTypes, constructorParamValues);\n      return this.deployContractWithAbi.prepare(compilerMetadata.abi, bytecode, paramValues);\n    }));\n    /**\n     * @internal\n     * @param abi\n     * @param bytecode\n     * @param constructorParams\n     */\n    _defineProperty(this, \"deployContractWithAbi\", buildDeployTransactionFunction(async (abi, bytecode, constructorParams) => {\n      const signer = this.getSigner();\n      const provider = this.getProvider();\n      invariant(signer, \"Signer is required to deploy contracts\");\n      const factory = new ethers.ContractFactory(abi, bytecode).connect(signer);\n      return new DeployTransaction({\n        args: constructorParams,\n        provider,\n        signer,\n        factory,\n        storage: this.storage,\n        events: this.events\n      });\n    }));\n    this.storage = storage;\n    this.events = new EventEmitter$1();\n    // Initialize factory and registry (we don't need to make these calls async)\n    this.getFactory();\n    this.getRegistry();\n  }\n  /**\n   * @internal\n   * @param contractType\n   */\n  async getLatestBuiltInContractVersion(contractType) {\n    const factory = await this.getFactory();\n    if (!factory) {\n      throw new Error(\"Factory not found\");\n    }\n    return await factory.getLatestVersion(contractType);\n  }\n  /**\n   * @internal\n   */\n  async getRegistry() {\n    // if we already have a registry just return it back\n    if (this._registry) {\n      return this._registry;\n    }\n\n    // otherwise get the registry address for the active chain and get a new one\n\n    // have to do it like this otherwise we run it over and over and over\n    // \"this._registry\" has to be assigned to the promise upfront.\n    return this._registry = this.getProvider().getNetwork().then(async _ref2 => {\n      let {\n        chainId\n      } = _ref2;\n      const registryAddress = getContractAddressByChainId(chainId, \"twRegistry\");\n      if (!registryAddress) {\n        return undefined;\n      }\n      return new ContractRegistry(registryAddress, this.getSignerOrProvider(), this.options);\n    });\n  }\n  async getFactory() {\n    // if we already have a factory just return it back\n    if (this._factory) {\n      return this._factory;\n    }\n\n    // otherwise get the factory address for the active chain and get a new one\n\n    // have to do it like this otherwise we run it over and over and over\n    // \"this._factory\" has to be assigned to the promise upfront.\n    return this._factory = this.getProvider().getNetwork().then(async _ref3 => {\n      let {\n        chainId\n      } = _ref3;\n      const factoryAddress = getContractAddressByChainId(chainId, \"twFactory\");\n      if (!factoryAddress) {\n        return undefined;\n      }\n      const factory = new ContractFactory(factoryAddress, this.getSignerOrProvider(), this.storage, this.options);\n      return factory;\n    });\n  }\n  updateSignerOrProvider(network) {\n    super.updateSignerOrProvider(network);\n    this.updateContractSignerOrProvider();\n  }\n  updateContractSignerOrProvider() {\n    // has to be promises now\n    this._factory?.then(factory => {\n      factory?.updateSignerOrProvider(this.getSignerOrProvider());\n    }).catch(() => {\n      // ignore\n    });\n    // has to be promises now\n    this._registry?.then(registry => {\n      registry?.updateSignerOrProvider(this.getSignerOrProvider());\n    }).catch(() => {\n      // ignore\n    });\n  }\n  /**\n   * @public\n   * @param publishMetadataUri\n   * @param options\n   */\n  async getTransactionsForDeploy(publishMetadataUri, options) {\n    let transactions = [];\n    const provider = this.getProvider();\n    invariant(provider, \"A provider is required\");\n    const {\n      extendedMetadata\n    } = await fetchAndCacheDeployMetadata(publishMetadataUri, this.storage);\n    const forceDirectDeploy = options?.forceDirectDeploy || false;\n    if (extendedMetadata && extendedMetadata.factoryDeploymentData && (extendedMetadata.isDeployableViaProxy || extendedMetadata.isDeployableViaFactory || extendedMetadata.deployType === \"autoFactory\") && !forceDirectDeploy) {\n      const chainId = (await this.getProvider().getNetwork()).chainId;\n      let implementationAddress = extendedMetadata.factoryDeploymentData.implementationAddresses[chainId];\n      if (!implementationAddress || extendedMetadata.deployType === \"autoFactory\") {\n        const create2FactoryAddress = await getCreate2FactoryAddress(this.getProvider());\n        transactions.push({\n          contractType: \"create2Factory\",\n          addresses: [create2FactoryAddress]\n        });\n        const deploymentInfo = await getDeploymentInfo(publishMetadataUri, this.storage, this.getProvider(), create2FactoryAddress);\n        const transactionsToSend = deploymentInfo.filter(i => i.transaction.data && i.transaction.data.length > 0);\n        const transactionsforDirectDeploy = transactionsToSend.filter(i => {\n          return i.type !== \"infra\";\n        }).map(i => i.transaction);\n        transactionsforDirectDeploy.forEach(tx => {\n          transactions.push({\n            contractType: \"preset\",\n            addresses: [tx.predictedAddress]\n          });\n        });\n        const transactionsForThrowawayDeployer = transactionsToSend.filter(i => {\n          return i.type === \"infra\";\n        }).map(i => i.transaction);\n        const transactionBatches = createTransactionBatches(transactionsForThrowawayDeployer);\n        transactionBatches.forEach(batch => {\n          const addresses = batch.map(tx => tx.predictedAddress);\n          transactions.push({\n            contractType: \"infra\",\n            addresses: addresses\n          });\n        });\n      }\n      transactions = (await Promise.all(transactions.map(async tx => {\n        const addresses = (await Promise.all(tx.addresses.map(async address => {\n          const isDeployed = await isContractDeployed(address, provider);\n          return isDeployed ? null : address;\n        }))).filter(Boolean);\n        return addresses.length > 0 ? tx : null;\n      }))).filter(Boolean);\n      transactions.push({\n        contractType: \"proxy\",\n        addresses: []\n      });\n    } else {\n      transactions.push({\n        contractType: \"custom\",\n        addresses: []\n      });\n    }\n    return transactions;\n  }\n\n  /**\n   * Listen to all deploy transactions from this deployer\n   * @param listener the listener to add\n   */\n  addDeployListener(listener) {\n    this.events.on(\"contractDeployed\", listener);\n  }\n\n  /**\n   * Remove a deploy listener\n   * @param listener the listener to remove\n   */\n  removeDeployListener(listener) {\n    this.events.off(\"contractDeployed\", listener);\n  }\n\n  /**\n   * Remove all deploy listeners\n   */\n  removeAllDeployListeners() {\n    this.events.removeAllListeners(\"contractDeployed\");\n  }\n\n  // PRIVATE METHODS\n\n  async fetchPublishedContractFromPolygon(publisherAddress, contractName, version) {\n    const address = await resolveAddress(publisherAddress);\n    const publishedContract = await new ThirdwebSDK(\"polygon\").getPublisher().getVersion(address, contractName, version);\n    if (!publishedContract) {\n      throw new Error(`No published contract found for '${contractName}' at version '${version}' by '${address}'`);\n    }\n    return publishedContract;\n  }\n  hasLocalFactory() {\n    // eslint-disable-next-line turbo/no-undeclared-env-vars\n    return process.env.factoryAddress !== undefined;\n  }\n}\n\nexport { APPROVED_IMPLEMENTATIONS as A, ContractDeployer as C, LOCAL_NODE_PKEY as L, SUPPORTED_CHAIN_IDS as S, ThirdwebSDK as T, UserWallet as U, getAllDetectedExtensionNames as a, verify as b, checkVerificationStatus as c, computeCloneFactoryAddress as d, extractFunctionParamsFromAbi as e, getThirdwebContractAddress as f, getAllDetectedFeatureNames as g, getEncodedConstructorParamsForThirdwebContract as h, isVerifiedOnEtherscan as i, deployCreate2Factory as j, deployContractDeterministic as k, getDeploymentInfo as l, deployWithThrowawayDeployer as m, convertParamValues as n, estimateGasForDeploy as o, predictThirdwebContractAddress as p, createTransactionBatches as q, getDeployArguments as r, getTrustedForwarders as s, toWei as t, getApprovedImplementation as u, verifyThirdwebPrebuiltImplementation as v, getDefaultTrustedForwarders as w, extractFeatures as x };\n", "const GENERATED_ABI = {};\n\nexport { GENERATED_ABI };\n", "import { cj as resolveAddress, cD as getSignerAndProvider, dc as SmartContract, dd as getCompositePluginABI, e as AbiSchema, cV as getContractTypeForRemoteName, db as ContractPublisher, cS as PREBUILT_CONTRACTS_MAP } from './contract-publisher-a7ca5177.browser.esm.js';\nimport { ThirdwebStorage } from '@thirdweb-dev/storage';\nimport IThirdwebContractABI from '@thirdweb-dev/contracts-js/dist/abis/IThirdwebContract.json';\nimport { Contract, ethers } from 'ethers';\n\nlet STORAGE_CACHE = new ThirdwebStorage();\nconst CONTRACT_CACHE = new Map();\nfunction getContractCacheKey(address, chainId) {\n  return `${address}-${chainId}`;\n}\nfunction inContractCache(address, chainId) {\n  const cacheKey = getContractCacheKey(address, chainId);\n  return CONTRACT_CACHE.has(cacheKey);\n}\nfunction getCachedContract(address, chainId) {\n  if (!inContractCache(address, chainId)) {\n    throw new Error(`Contract ${address} was not found in cache`);\n  }\n  const cacheKey = getContractCacheKey(address, chainId);\n  return CONTRACT_CACHE.get(cacheKey);\n}\nfunction cacheContract(contract, address, chainId) {\n  const cacheKey = getContractCacheKey(address, chainId);\n  CONTRACT_CACHE.set(cacheKey, contract);\n}\nfunction getCachedStorage(storage) {\n  return storage || STORAGE_CACHE;\n}\n\nasync function getContractFromAbi(params) {\n  const resolvedAddress = await resolveAddress(params.address);\n  const [signer, provider] = getSignerAndProvider(params.network, params.sdkOptions);\n  const chainId = (await provider.getNetwork()).chainId;\n  if (inContractCache(resolvedAddress, chainId)) {\n    return getCachedContract(resolvedAddress, chainId);\n  }\n  const parsedAbi = typeof params.abi === \"string\" ? JSON.parse(params.abi) : params.abi;\n  const contract = new SmartContract(signer || provider, resolvedAddress, await getCompositePluginABI(resolvedAddress, AbiSchema.parse(parsedAbi), provider, params.sdkOptions, getCachedStorage(params.storage)), getCachedStorage(params.storage), params.sdkOptions, chainId);\n  cacheContract(contract, resolvedAddress, chainId);\n  return contract;\n}\n\nasync function resolveContractType(params) {\n  try {\n    const contract = new Contract(params.address, IThirdwebContractABI, params.provider);\n    const remoteContractType = ethers.utils.toUtf8String(await contract.contractType())\n    // eslint-disable-next-line no-control-regex\n    .replace(/\\x00/g, \"\");\n    return getContractTypeForRemoteName(remoteContractType);\n  } catch (err) {\n    return \"custom\";\n  }\n}\n\nasync function getContract(params) {\n  const resolvedAddress = await resolveAddress(params.address);\n  const [signer, provider] = getSignerAndProvider(params.network, params.sdkOptions);\n  const chainId = (await provider.getNetwork()).chainId;\n  if (inContractCache(resolvedAddress, chainId)) {\n    return getCachedContract(resolvedAddress, chainId);\n  }\n  if (!params.contractTypeOrAbi || params.contractTypeOrAbi === \"custom\") {\n    const contractType = await resolveContractType({\n      address: resolvedAddress,\n      provider\n    });\n    if (contractType === \"custom\") {\n      const publisher = new ContractPublisher(params.network, params.sdkOptions, getCachedStorage(params.storage));\n      try {\n        const metadata = await publisher.fetchCompilerMetadataFromAddress(resolvedAddress);\n        return getContractFromAbi({\n          ...params,\n          address: resolvedAddress,\n          abi: metadata.abi\n        });\n      } catch {\n        throw new Error(`No ABI found for this contract. Try importing it by visiting: https://thirdweb.com/${chainId}/${resolvedAddress}`);\n      }\n    } else {\n      const abi = await PREBUILT_CONTRACTS_MAP[contractType].getAbi(resolvedAddress, provider, getCachedStorage(params.storage));\n      return getContractFromAbi({\n        ...params,\n        address: resolvedAddress,\n        abi\n      });\n    }\n  } else if (typeof params.contractTypeOrAbi === \"string\" && params.contractTypeOrAbi in PREBUILT_CONTRACTS_MAP) {\n    const contract = await PREBUILT_CONTRACTS_MAP[params.contractTypeOrAbi].initialize(signer || provider, resolvedAddress, getCachedStorage(params.storage), params.sdkOptions);\n    cacheContract(contract, resolvedAddress, chainId);\n    return contract;\n  } else {\n    return getContractFromAbi({\n      ...params,\n      address: resolvedAddress,\n      abi: params.contractTypeOrAbi\n    });\n  }\n}\n\n// weakmap because if we GC the provider somewhere else we don't need to hold onto the promise anymore\nconst CHAIN_ID_CACHE = new WeakMap();\n\n/**\n * A function that returns the chainId for a given network input + sdk options combination.\n * This function will cache the promise for the chainId so that it can be reused.\n * You can call this function multiple times with the same params and it will only make one request to the provider.\n *\n * @returns the ChainId\n * @internal\n */\nasync function getChainId(params) {\n  const [, provider] = getSignerAndProvider(params.network, params.sdkOptions);\n  let chainIdPromise;\n  // if we already have a promise for the chainId, use that\n  if (CHAIN_ID_CACHE.has(provider)) {\n    chainIdPromise = CHAIN_ID_CACHE.get(provider);\n  } else {\n    chainIdPromise = provider.getNetwork()\n    // we only want the chainId\n    .then(network => network.chainId).catch(err => {\n      // in the case where the provider fails we should remove the promise from the cache so we can try again\n      CHAIN_ID_CACHE.delete(provider);\n      // also re-throw the error so downstream can handle it\n      throw err;\n    });\n    CHAIN_ID_CACHE.set(provider, chainIdPromise);\n  }\n\n  // finally await the promise (will resolve immediately if already in cache and resolved)\n  return await chainIdPromise;\n}\n\n/**\n * Get the latest block number from a given network.\n *\n * @example\n * ```javascript\n * const block = await getBlockNumber({\n *  network: \"ethereum\"\n * });\n * ```\n * @returns the latest block number\n * @public\n */\nasync function getBlockNumber(params) {\n  const [, provider] = getSignerAndProvider(params.network, params.sdkOptions);\n  return provider.getBlockNumber();\n}\nconst BLOCK_PROMISE_CACHE = new Map();\n/**\n * Get a specific block from a given network.\n *\n * @example\n * ```javascript\n * const block = await getBlock({\n *  network: \"ethereum\",\n *  block: 12345678\n * });\n * ```\n *\n * @returns the block for the given block number / block tag\n * @public\n */\nasync function getBlock(params) {\n  // first off get the chainId so we can check if we have something in cache for the blockNumber already\n  // this is 1 extra call once per possible provider\n  const chainId = await getChainId(params);\n  const blockTag = params.block;\n  const cacheKey = `${chainId}_${blockTag}`;\n  let blockPromise;\n  if (BLOCK_PROMISE_CACHE.has(cacheKey)) {\n    blockPromise = BLOCK_PROMISE_CACHE.get(cacheKey);\n  } else {\n    const [, provider] = getSignerAndProvider(params.network, params.sdkOptions);\n    blockPromise = provider.getBlock(blockTag).catch(err => {\n      // in the case where the call fails we should remove the promise from the cache so we can try again\n      BLOCK_PROMISE_CACHE.delete(cacheKey);\n      // also re-throw the error so downstream can handle it\n      throw err;\n    });\n    BLOCK_PROMISE_CACHE.set(cacheKey, blockPromise);\n  }\n\n  // finally await the promise (will resolve immediately if already in cache and resolved)\n  return await blockPromise;\n}\nconst BLOCK_WITH_TRANSACTIONS_PROMISE_CACHE = new Map();\n/**\n * Get a specific block (with the transactions contained in it) from a given network.\n *\n * @example\n * ```javascript\n * const block = await getBlockWithTransactions({\n *  network: \"ethereum\",\n *  block: 12345678\n * });\n * ```\n *\n * @returns the block for the given block number / block tag\n * @public\n */\nasync function getBlockWithTransactions(params) {\n  // first off get the chainId so we can check if we have something in cache for the blockNumber already\n  // this is 1 extra call once per possible provider\n  const chainId = await getChainId(params);\n  const blockTag = params.block;\n  const cacheKey = `${chainId}_${blockTag}`;\n  let blockPromise;\n  if (BLOCK_PROMISE_CACHE.has(cacheKey)) {\n    blockPromise = BLOCK_WITH_TRANSACTIONS_PROMISE_CACHE.get(cacheKey);\n  } else {\n    const [, provider] = getSignerAndProvider(params.network, params.sdkOptions);\n    blockPromise = provider.getBlockWithTransactions(blockTag).catch(err => {\n      // in the case where the call fails we should remove the promise from the cache so we can try again\n      BLOCK_WITH_TRANSACTIONS_PROMISE_CACHE.delete(cacheKey);\n      // also re-throw the error so downstream can handle it\n      throw err;\n    });\n    BLOCK_WITH_TRANSACTIONS_PROMISE_CACHE.set(cacheKey, blockPromise);\n  }\n\n  // finally await the promise (will resolve immediately if already in cache and resolved)\n  return await blockPromise;\n}\n\n/**\n * Watch for a new block number on a given network.\n *\n * @example\n * ```javascript\n * // this will log out the new block number every time a new block is finalized\n * const unsubscribe = watchBlockNumber({\n *   network: \"ethereum\",\n *   onBlockNumber: (blockNumber) => {\n *     console.log(\"new block number\", blockNumber);\n *   }\n * });\n * // later on you can call unsubscribe to stop listening for new blocks\n * unsubscribe();\n * ```\n *\n * @returns an unsubscribe function that will stop listening for new blocks when called\n * @public\n */\nfunction watchBlockNumber(params) {\n  const [, provider] = getSignerAndProvider(params.network, params.sdkOptions);\n  // start listening\n  provider.on(\"block\", params.onBlockNumber);\n  // return a function that unsubscribes the listener\n  return () => {\n    provider.off(\"block\", params.onBlockNumber);\n  };\n}\n/**\n * Watch for new blocks on a given network.\n *\n * @example\n * ```javascript\n * // this will log out the new block every time a new block is finalized\n * const unsubscribe = watchBlock({\n *   network: \"ethereum\",\n *   onBlock: (block) => {\n *     console.log(\"new block\", block);\n *   }\n * });\n * // later on you can call unsubscribe to stop listening for new blocks\n * unsubscribe();\n * ```\n *\n * @returns an unsubscribe function that will stop listening for new blocks when called\n * @public\n */\nfunction watchBlock(_ref) {\n  let {\n    onBlock,\n    ...sharedBlockParams\n  } = _ref;\n  async function onBlockNumber(blockNumber) {\n    try {\n      onBlock(await getBlock({\n        block: blockNumber,\n        ...sharedBlockParams\n      }));\n    } catch (err) {\n      // skip the block I guess?\n    }\n  }\n  // start listening and return the unsubscribe function from within watchBlockNumber\n  return watchBlockNumber({\n    ...sharedBlockParams,\n    onBlockNumber\n  });\n}\n/**\n * Watch for new blocks on a given network. (Includes parsed transactions)\n *\n * @example\n * ```javascript\n * // this will log out the new block every time a new block is finalized\n * const unsubscribe = watchBlockWithTransactions({\n *   network: \"ethereum\",\n *   onBlock: (block) => {\n *     console.log(\"new block\", block);\n *     console.log(\"new transactions\", block.transactions)\n *   }\n * });\n * // later on you can call unsubscribe to stop listening for new blocks\n * unsubscribe();\n *\n * @returns an unsubscribe function that will stop listening for new blocks when called\n * @public\n */\nfunction watchBlockWithTransactions(_ref2) {\n  let {\n    onBlock,\n    ...sharedBlockParams\n  } = _ref2;\n  async function onBlockNumber(blockNumber) {\n    try {\n      onBlock(await getBlockWithTransactions({\n        block: blockNumber,\n        ...sharedBlockParams\n      }));\n    } catch (err) {\n      // skip the block I guess?\n    }\n  }\n  // start listening and return the unsubscribe function from within watchBlockNumber\n  return watchBlockNumber({\n    ...sharedBlockParams,\n    onBlockNumber\n  });\n}\n\n/**\n * Watch for transactions to or from a given address.\n *\n * @example\n * ```javascript\n * // this will log out the new transactions every time a new block is finalized\n * const unsubscribe = watchTransactions({\n *   network: \"ethereum\",\n *   address: \"0x1234\",\n *   onTransactions: (transactions) => {\n *     console.log(\"new transactions\", transactions);\n *   }\n * });\n * // later on you can call unsubscribe to stop listening for new transactions\n * unsubscribe();\n * ```\n *\n * @returns an unsubscribe function that will stop listening for new transactions when called\n * @public\n */\nfunction watchTransactions(_ref) {\n  let {\n    address,\n    onTransactions,\n    ...sharedBlockParams\n  } = _ref;\n  // compute the toLowerCase address once so we don't have to do it on every block / transaction\n  const lcAddress = address.toLowerCase();\n  function onBlock(block) {\n    const transactions = block.transactions.filter(tx => {\n      // match on from first because it's guaranteed to exist\n      if (tx.from.toLowerCase() === lcAddress) {\n        // if we have a from address match on that then return true and early exit\n        return true;\n      }\n      // if we have a to address match on that and if it doesn't match then we want to return false anyways :)\n      return tx.to?.toLowerCase() === lcAddress;\n    });\n    // only call the callback if we have transactions to report\n    if (transactions.length > 0) {\n      onTransactions(transactions);\n    }\n  }\n  return watchBlockWithTransactions({\n    ...sharedBlockParams,\n    onBlock\n  });\n}\n\nexport { getContractFromAbi as a, getChainId as b, getBlock as c, getBlockNumber as d, getBlockWithTransactions as e, watchBlockNumber as f, getContract as g, watchBlockWithTransactions as h, watchTransactions as i, watchBlock as w };\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;ACAA;;;ACAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAKA;;;ACLA;AAAA,IAAM,gBAAgB,CAAC;;;ADYvB,yBAAkB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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",
  "names": ["implementation", "fetch", "paramValues", "EventEmitter", "process", "ProposalState", "import_cross_fetch", "import_utils"]
}
